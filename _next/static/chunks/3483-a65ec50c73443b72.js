(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3483],{61435:function(e,n,t){"use strict";t.d(n,{Z:function(){return i}});var o=t(85893),r=t(98163);function i(e){let{btnText:n="button",type:t="button",href:i="/",onClick:a=()=>{},paddingType:s="",className:c,disabled:l=!1}=e;return(0,o.jsx)(r.Z,{type:t,href:i,variant:"outlined",onClick:a,className:c,sx:{color:"white",fontFamily:"Noto Serif JP",borderRadius:"100px",borderColor:"#222",background:"#222",fontSize:"16px",padding:"medium"===s?"8px 32px":"8px 16px",":hover":{color:"black",borderColor:"#222"},"&.Mui-disabled":{color:"var(--text-grey)",borderColor:"var(--pri-3)",background:"var(--pri-3)",cursor:"not-allowed"}},disabled:l,children:n})}},34815:function(e,n,t){"use strict";t.d(n,{Z:function(){return s}});var o=t(85893),r=t(16829),i=t(55292);let a=(0,r.Z)(i.z)(()=>"\n  background: none;\n  border: none;\n  margin: 0;\n  padding: 0;\n  font: inherit;\n  color: inherit;\n  cursor: pointer;\n  border-radius: 0;\n  box-shadow: none;\n  outline: none;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 4px;\n  letter-spacing: 0.125rem;\n\n  &:focus {\n    outline: none;\n  }\n  &:hover,\n  &:active {\n    outline: none;\n  }\n");function s(e){let{btnText:n="",type:t="button",onClick:r=()=>{}}=e;return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(a,{type:t,onClick:r,children:n})})}},54677:function(e,n,t){"use strict";t.d(n,{Z:function(){return g}});var o=t(85893),r=t(67294),i=t(83886),a=t(747),s=t(98163);function c(e){let{btnText:n="button",type:t="button",href:r="/",onClick:i=()=>{},paddingType:a="",className:c}=e;return(0,o.jsx)(s.Z,{type:t,href:r,variant:"outlined",onClick:i,className:c,sx:{color:"white",fontFamily:"Noto Serif JP",borderRadius:"100px",borderColor:"var(--danger)",background:"var(--danger)",fontSize:"16px",padding:"medium"===a?"8px 32px":"8px 16px",":hover":{color:"var(--danger)",borderColor:"var(--danger)"}},children:n})}var l=t(37140),d=t(61930),u=t.n(d),x=t(64864),p=t(74123),m=t(7820);let h=(0,r.forwardRef)(function(e,n){return(0,o.jsx)(p.Z,{direction:"up",ref:n,...e})}),f=(0,i.Z)({components:{MuiDialog:{styleOverrides:{paper:{display:"flex",flexDirection:"column",alignItems:"center",overflow:"visible",padding:"1.5rem",borderRadius:"var(--popup-radius)",border:"2px solid var(--danger)",width:"400px"}}}}});function g(e){let{dialogTitle:n="標題",btnTextRight:t="確定",btnTextLeft:r="取消"}=e,{isConfirmDialogOpen:i,closeConfirmDialog:s,handleConfirm:d}=(0,m.W)();return(0,o.jsx)(a.Z,{theme:f,children:(0,o.jsxs)(x.Z,{open:i,onClose:s,TransitionComponent:h,keepMounted:!0,children:[(0,o.jsx)("img",{src:"/ghost/ghost_14.png",className:u().dialogImg}),(0,o.jsx)("h6",{className:u().dialogTitle,children:n}),(0,o.jsxs)("div",{className:u().btnStack,children:[(0,o.jsx)(l.Z,{btnText:r,paddingType:"medium",onClick:s,href:null}),(0,o.jsx)(c,{btnText:t,paddingType:"medium",onClick:d,href:null})]})]})})}},66641:function(e,n,t){"use strict";t.d(n,{Z:function(){return r}});var o=t(85893);function r(e){let{width:n="100%",height:t="2px",backgroundColor:r="var(--pri-3)",margin:i="0"}=e;return(0,o.jsx)("div",{style:{width:n,height:t,backgroundColor:r,margin:i}})}},35514:function(e,n,t){"use strict";t.d(n,{Z:function(){return i}});var o=t(85893),r=t(98163);function i(e){let{btnText:n="沒設名字",href:t="",margin:i="0",marginLeft:a="0",onClick:s=()=>{}}=e;return(0,o.jsx)(r.Z,{onClick:s,href:t,variant:"outlined",sx:{color:"black",fontFamily:"Noto Serif JP",borderRadius:"100px",margin:i,marginLeft:a,borderColor:"#222",lineHeight:"normal",":hover":{borderColor:"#222"}},children:n})}},69236:function(e,n,t){"use strict";t.d(n,{Z:function(){return u}});var o=t(85893),r=t(67294),i=t(45697),a=t.n(i),s=t(59608),c=t(89609),l=t(13264);function d(e){let{separator:n,length:t,value:i,onChange:a,color:l}=e,d=(0,r.useRef)(Array(t).fill(null)),u=e=>{d.current[e].focus()},p=e=>{d.current[e].select()},m=(e,n)=>{switch(e.key){case"ArrowUp":case"ArrowDown":case" ":e.preventDefault();break;case"ArrowLeft":e.preventDefault(),n>0&&(u(n-1),p(n-1));break;case"ArrowRight":e.preventDefault(),n<t-1&&(u(n+1),p(n+1));break;case"Delete":e.preventDefault(),a(e=>e.slice(0,n)+e.slice(n+1));break;case"Backspace":e.preventDefault(),n>0&&(u(n-1),p(n-1)),a(e=>e.slice(0,n)+e.slice(n+1))}},h=(e,n)=>{let o=e.target.value,r=0;for(;r<=n;)if(d.current[r].value&&r<n)r+=1;else break;a(e=>{let n=e.split(""),t=o[o.length-1];return n[r]=t,n.join("")}),""!==o&&n<t-1&&u(n+1)},f=(e,n)=>{p(n)},g=(e,n)=>{e.preventDefault();let o=e.clipboardData;if(o.types.includes("text/plain")){let e=o.getData("text/plain");e=e.substring(0,t).trim();let s=0;for(;s<=n;)if(d.current[s].value&&s<n)s+=1;else break;let c=i.split("");for(let n=s;n<t;n+=1){var r;let t=null!==(r=e[n-s])&&void 0!==r?r:" ";c[n]=t}a(c.join(""))}};return(0,o.jsx)(c.Z,{sx:{display:"flex",gap:1,alignItems:"center"},children:Array(t).fill().map((e,a)=>{var c;return(0,o.jsxs)(r.Fragment,{children:[(0,o.jsx)(s.I,{type:"number",slots:{input:x},"aria-label":"Digit ".concat(a+1," of OTP"),slotProps:{input:{ref:e=>{d.current[a]=e},onKeyDown:e=>m(e,a),onChange:e=>h(e,a),onClick:e=>f(e,a),onPaste:e=>g(e,a),value:null!==(c=i[a])&&void 0!==c?c:"",sx:{color:l}}}}),a===t-1?null:n]},a)})})}function u(e){let{state:n,setState:t,color:r="#222222"}=e;return(0,o.jsx)(c.Z,{sx:{display:"flex",flexDirection:"column",gap:2},children:(0,o.jsx)(d,{value:n,onChange:t,length:6,color:r})})}d.propTypes={length:a().number.isRequired,onChange:a().func.isRequired,separator:a().node,value:a().string.isRequired,color:a().string.isRequired};let x=(0,l.Z)("input")(()=>"\n  width: 50px;\n  height: 50px;\n  font-family: 'Noto Serif JP', 'serif';\n  font-size: 1rem;\n  font-weight: 400;\n  line-height: 1.5;\n  padding: 10px 10px;\n  text-align: center;\n  background: '#fff';\n  border: 2px solid #d9d9d9;\n  -webkit-appearance: none;\n  -moz-appearance:textfield;\n\n\n  &::-webkit-outer-spin-button,\n  &::-webkit-inner-spin-button {\n    -webkit-appearance: none;\n    margin: 0;\n  }\n\n  &:hover {\n    border-color: #bbb29f;\n  }\n\n  &:focus {\n    border-color: #bbb29f;\n    box-shadow: 0 0 0 3px #efede8;\n  }\n\n  // firefox\n  -moz-appearance: textfield;\n  &:focus-visible {\n    outline: 0;\n  }\n")},43036:function(e,n,t){"use strict";t.d(n,{Z:function(){return a}});var o=t(85893),r=t(39224),i=t.n(r);function a(e){let{text:n="no data",fontSize:t="20px",backgroundColor:r="none",borderRadius:a="1rem"}=e;return(0,o.jsx)("div",{className:i().noDataBox,style:{backgroundColor:r,borderRadius:a},children:(0,o.jsxs)("div",{className:i().imgTextBox,children:[(0,o.jsx)("img",{src:"/ghost/ghost_01.png",alt:""}),(0,o.jsx)("p",{style:{fontSize:t},children:n})]})})}},37140:function(e,n,t){"use strict";t.d(n,{Z:function(){return i}});var o=t(85893),r=t(98163);function i(e){let{btnText:n="button",type:t="button",href:i="",onClick:a=()=>{},paddingType:s=""}=e;return(0,o.jsx)(r.Z,{type:t,href:i,variant:"outlined",onClick:a,sx:{color:"black",fontFamily:"Noto Serif JP",borderRadius:"100px",letterSpacing:"1.92px",fontSize:"16px",borderColor:"#222",padding:"medium"===s?"8px 32px":"8px 16px",":hover":{color:"white",borderColor:"#222",background:"#222"}},children:n})}},53483:function(e,n,t){"use strict";t.d(n,{Z:function(){return eq}});var o=t(85893),r=t(1822),i=t.n(r),a=t(67294),s=t(9008),c=t.n(s),l=t(60451),d=t.n(l),u=t(41664),x=t.n(u),p=t(25675),m=t.n(p),h=t(16075),f=t(84295),g=t(43291),_=t(34815),j=t(53724),b=t.n(j),v=t(11163),k=t.n(v),y=t(375),C=t(34370),w=t(45732),N=t(33367),Z=t(89262),T=t(83886),B=t(747),S=t(28552),D=t(55750),I=t(61435),F=t(57850),z=t(36109),R=t(69904);let L=(0,Z.ZP)(w.Z)(e=>{let{theme:n}=e;return{"& .MuiBadge-badge":{right:-24,top:-20,color:"white",backgroundColor:"var(--sec-1)"}}}),E=(0,T.Z)({components:{MuiDrawer:{styleOverrides:{paper:{width:"40%",maxWidth:"480px",minWidth:"352px",backgroundColor:"white","@media (max-width:400px)":{width:"90%"}}}}}});function M(){let e=(0,v.useRouter)(),[n,t]=(0,a.useState)(!1),{checkoutTotal:r,subtotal:i,deliverFee:s,cartBadgeQty:c,discountTotal:l}=(0,S.j)();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(N.Z,{"aria-label":"cart",onClick:()=>t(e=>!e),sx:{width:"2rem",height:"2rem",padding:"2px"},children:[(0,o.jsx)(y.E.div,{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},transition:{duration:.3,ease:[0,.71,.2,1.01],scale:{type:"spring",damping:5,stiffness:50,restDelta:.001}},children:(0,o.jsx)(L,{badgeContent:c,color:"secondary",max:99})},i),(0,o.jsx)(f.Hki,{})]}),(0,o.jsx)(B.Z,{theme:E,children:(0,o.jsx)(C.ZP,{open:n,onClose:()=>t(!1),anchor:"right",children:(0,o.jsxs)("div",{className:b().drawerContainer,children:[(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:b().checkoutTitle,children:[(0,o.jsx)("h5",{children:"購物車"}),(0,o.jsx)("div",{className:b().cartItemCount,children:c})]}),c<=0&&(0,o.jsx)(z.Z,{}),c>0&&(0,o.jsx)("div",{className:b().checkoutList,children:(0,o.jsx)(F.Z,{type:"small"})})]}),c>0&&(0,o.jsxs)("div",{className:b().checkoutBottom,children:[(0,o.jsx)(R.Z,{}),(0,o.jsx)(D.Z,{subtotal:i,checkoutTotal:r,deliverFee:s,totalDiscount:l}),(0,o.jsx)(I.Z,{btnText:"前往購物車",href:null,onClick:()=>{e.push("/checkout")},paddingType:"medium"})]})]})})})]})}var O=t(62325),q=t(45747),P=t(49130),A=t(93751);let H=(0,Z.ZP)(w.Z)(()=>({"& .MuiBadge-badge":{right:-3,top:-3,color:"white",backgroundColor:"var(--sec-1)"}}));function W(){let{auth:e}=(0,h.aC)(),{unreadCount:n}=(0,P.zn)();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(y.E.div,{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},transition:{duration:.3,ease:[0,.71,.2,1.01],scale:{type:"spring",damping:5,stiffness:50,restDelta:.001}},children:(0,o.jsx)(H,{badgeContent:n,color:"secondary",max:99,sx:{top:"-18px",right:"-32px"}})},n),(0,o.jsx)(A.Z,{size:"md",variant:"solid",alt:e.nickname,src:e.avatar?"".concat(q.UW,"/avatar/").concat(e.avatar):"",sx:{width:32,height:32,zIndex:-1}})]})}var G=t(12985),J=t(74123),U=t(41869),K=t(86605),Q=t(50280),Y=t(94246),V=t(21946),X=t(59505);let $=(0,T.Z)({components:{MuiAlert:{styleOverrides:{root:{width:"100%",padding:"0 16px",backgroundColor:"transparent",color:"#222222","& .MuiAlert-message":{display:"flex",flexDirection:"column",gap:"5px",padding:0}},standardSuccess:{"& .MuiAlert-icon":{padding:"4px 0",fontSize:"16px",color:"#d9d9d9"}},standardInfo:{"& .MuiAlert-icon":{padding:"4px 0",fontSize:"16px",color:"#63AA90"}}}},MuiAlertTitle:{styleOverrides:{root:{fontWeight:"bold",color:"#222222"}}},MuiMenu:{styleOverrides:{root:{top:"32px",left:"6px"},paper:{backgroundColor:"#eeeeee",borderRadius:"0 0 0px 16px",maxHeight:"700px",width:"450px"},list:{padding:0}}},MuiAvatar:{styleOverrides:{root:{width:"50px",height:"50px",backgroundColor:"#B99755"}}},MuiMenuItem:{styleOverrides:{root:{display:"flex",flexDirection:"row",justifyContent:"space-between"}}},MuiTypography:{styleOverrides:{root:{fontFamily:"Noto Serif JP , serif"}}}}});var ee=t(92022),en=t(92088);function et(e){let{closeMenu:n}=e,{logout:t,auth:r}=(0,h.aC)();return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)(U.Z,{sx:{position:"sticky",top:0,zIndex:100,backgroundColor:"#eeeeee",padding:"8px 0 0 0"},children:[(0,o.jsxs)(K.Z,{children:[(0,o.jsx)(ee.Z,{alt:"avatar",src:r.avatar?"".concat(q.UW,"/avatar/").concat(r.avatar):""}),(0,o.jsx)("p",{style:{flex:1,marginLeft:"1rem"},children:r.nickname}),(0,o.jsx)(_.Z,{onClick:e=>{t(),n(e)},btnText:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(en.lE7,{}),(0,o.jsx)("p",{children:"登出"})]})})]}),(0,o.jsx)(X.Z,{variant:"middle",component:"li"})]})})}function eo(e){let{anchorEl:n,open:t,onClose:r}=e,{messages:i,markMessageAsRead:s,loadMoreNotifications:c,hasMore:l,loading:d}=(0,P.zn)(),u=(0,a.useRef)(null),x=(0,a.useCallback)(()=>{if(u.current){var e;let n=null===(e=u.current)||void 0===e?void 0:e.parentNode;n.scrollHeight-n.scrollTop-n.clientHeight<=.5&&c()}},[c]);return(0,a.useEffect)(()=>{var e;let n=null===(e=u.current)||void 0===e?void 0:e.parentNode;return n&&n.addEventListener("scroll",x),()=>{n&&n.removeEventListener("scroll",x)}},[x]),(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(B.Z,{theme:$,children:(0,o.jsxs)(G.Z,{open:t,anchorEl:n,onClose:r,TransitionComponent:J.Z,TransitionProps:ea,disableScrollLock:!0,anchorOrigin:er,transformOrigin:ei,MenuListProps:{ref:u},children:[(0,o.jsx)(et,{closeMenu:r}),i.map(e=>(0,o.jsxs)(U.Z,{children:[(0,o.jsx)(K.Z,{onClick:()=>s(e.id),children:(0,o.jsxs)(Q.Z,{icon:(0,o.jsx)(f.gbA,{}),severity:"1"===e.is_read?"success":"info",children:[(0,o.jsx)(Y.Z,{variant:"body1",noWrap:!0,children:e.message}),(0,o.jsxs)(U.Z,{sx:{display:"flex",gap:1,alignItems:"center"},children:[(0,o.jsx)(V.Z,{label:e.type,size:"small",variant:"outlined"}),(0,o.jsx)(Y.Z,{variant:"caption",children:e.created_at})]})]})}),(0,o.jsx)(X.Z,{variant:"middle",component:"li"})]},e.id)),(0,o.jsx)(K.Z,{onClick:c,children:(0,o.jsx)("span",{style:{width:"100%",textAlign:"center",lineHeight:3},children:d?"載入中...":l?"載入更多":"沒有更多通知了"})})]})})})}let er={vertical:"bottom",horizontal:"right"},ei={vertical:"top",horizontal:"left"},ea={direction:"left"};function es(e){let{handleMobileMenu:n}=e,{auth:t}=(0,h.aC)(),{loginFormSwitch:r}=(0,O.NK)(),[i,s]=(0,a.useState)(null),c=!!i,l=e=>{e.preventDefault(),c?s(null):t.id?s(e.currentTarget):r("Login")};return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("ul",{className:d()["navbar-icon"],children:[(0,o.jsx)("li",{children:(0,o.jsx)(x(),{href:"/",children:(0,o.jsx)(m(),{src:"/home/ghost-logo.svg",alt:"LOGO",width:50,height:50,className:d()["logo-mobile"]})})}),(0,o.jsxs)("li",{style:{position:"relative",zIndex:100},children:[(0,o.jsx)(_.Z,{onClick:l,btnText:t.id?(0,o.jsx)(W,{}):(0,o.jsx)(f.Oce,{})}),(0,o.jsx)(eo,{anchorEl:i,open:c,onClose:l}),(0,o.jsx)("a",{children:(0,o.jsx)(M,{})}),(0,o.jsx)("a",{children:(0,o.jsx)(g.QQh,{onClick:n,className:d().menu})})]})]})})}function ec(e){let{pageName:n,menuState:t}=e;return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("ul",{className:"".concat(d()["navbar-links"]," animate__animated ").concat(t),children:[(0,o.jsx)("li",{children:(0,o.jsx)(x(),{href:"/themes",children:(0,o.jsx)("span",{className:d()["themes"===n?"page-name":""],children:"密室逃脫"})})}),(0,o.jsx)("li",{children:(0,o.jsx)(x(),{href:"/teams",children:(0,o.jsx)("span",{className:d()["teams"===n?"page-name":""],children:"揪團行程"})})}),(0,o.jsx)("li",{className:"logo",children:(0,o.jsx)(x(),{href:"/",children:(0,o.jsx)(m(),{src:"/home/LOGO.svg",alt:"LOGO",width:134.96,height:61.26,className:d()["logo-screen"]})})}),(0,o.jsx)("li",{children:(0,o.jsx)(x(),{href:"/product",children:(0,o.jsx)("span",{className:d()["product"===n?"page-name":""],children:"桌遊商城"})})}),(0,o.jsx)("li",{children:(0,o.jsx)(x(),{href:"/user/profile",children:(0,o.jsx)("span",{className:d()["user"===n?"page-name":""],children:"會員中心"})})})]})})}var el=t(64864),ed=t(78773),eu=t(16598);function ex(){let{loginWithGooglePopup:e}=(0,eu.Z)();return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)(B.Z,{theme:{components:{MuiIconButton:{styleOverrides:{root:{border:"2px solid #fff",color:"#fff"}}}}},children:[(0,o.jsx)(N.Z,{"aria-label":"delete",onClick:e,children:(0,o.jsx)(ed.ldW,{})}),(0,o.jsx)(N.Z,{"aria-label":"delete",children:(0,o.jsx)(ed.tBk,{})}),(0,o.jsx)(N.Z,{"aria-label":"delete",children:(0,o.jsx)(ed.oPZ,{})})]})})}var ep=t(7994),em=t.n(ep),eh=t(23739),ef=t.n(eh),eg=t(74931);function e_(e){let{name:n="",type:t="",value:r="",placeholder:i="",disabled:s=!1,onChange:c=()=>{}}=e,[l,d]=(0,a.useState)(!1),[u,x]=(0,a.useState)("");return(0,a.useEffect)(()=>{x(t)},[]),(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("div",{className:ef().input,children:[(0,o.jsx)("input",{name:n,type:u,value:r,placeholder:i,disabled:!0===s?"disabled":"",className:!0===s?ef().inputDisabled:ef().inputDefault,onChange:c}),(0,o.jsx)("button",{type:"button",className:ef().eyeIcon,onClick:()=>{let e=!l;x(e?"text":"password"),d(e)},children:"password"===t&&!1===s?l?(0,o.jsx)(eg.y7o,{}):(0,o.jsx)(eg.HR2,{}):null})]})})}function ej(e){let{loginData:n,handleLoginChange:t,loginErrors:r}=e;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e_,{name:"account",type:"text",value:n.account,placeholder:"請輸入Email",onChange:t}),(0,o.jsx)("span",{className:em().errorText,children:r.account}),(0,o.jsx)(e_,{name:"password",type:"password",value:n.password,placeholder:"請輸入密碼",onChange:t}),(0,o.jsx)("span",{className:em().errorText,children:r.password})]})}var eb=t(69236);let ev=(0,T.Z)({components:{MuiDialog:{styleOverrides:{paper:{overflow:"visible",borderRadius:"1rem",backgroundColor:"#343434",margin:"10px"}}}}});function ek(){let{loginModalState:e,loginData:n,loginErrors:t,handleLoginChange:r,loginSubmit:i,quickInput:a,loginFormSwitch:s,totpEnabled:c,totpDataState:l,setTotpDataState:d,login2faSubmit:u}=(0,O.NK)();return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(B.Z,{theme:ev,children:(0,o.jsxs)(el.Z,{open:e,onClose:()=>s(),"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,o.jsx)(_.Z,{btnText:(0,o.jsxs)("figure",{className:em().ghost,children:[(0,o.jsx)(m(),{src:"/ghost/ghost_04.png",alt:"",width:133,height:138}),(0,o.jsx)(m(),{src:"/ghost/ghost_13.png",alt:"",width:115,height:115})]}),onClick:()=>a({account:"test7@test.com",password:"12345678"},{account:"",password:"",reenter_password:"",name:""},{account:""})}),(0,o.jsxs)("form",{className:em().forms,onSubmit:c?u:i,children:[(0,o.jsx)("div",{className:em().title,children:(0,o.jsx)(_.Z,{btnText:(0,o.jsx)("h3",{children:"會員登入"}),onClick:()=>a({account:"ez003612@gmail.com",password:"asdasdasd"},{account:"ez003612@gmail.com",password:"qweqweqwe",reenter_password:"qweqweqwe",name:"銀耳機"},{account:"ez003612@gmail.com"})})}),(0,o.jsxs)("div",{className:em().box,children:[!0===c?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("span",{style:{paddingBottom:"10px"},children:"請輸入兩步驗證的驗證碼"}),(0,o.jsx)(eb.Z,{state:l,setState:d,color:"#fff"})]}):(0,o.jsx)(ej,{loginData:n,handleLoginChange:r,loginErrors:t}),(0,o.jsxs)("div",{className:em().box2,children:[(0,o.jsx)("span",{className:em().errorText,children:t.result}),(0,o.jsx)(_.Z,{onClick:()=>{s("ForgotPassword")},btnText:(0,o.jsx)("span",{children:"忘記密碼？"})})]})]}),(0,o.jsx)("div",{className:em().box,children:(0,o.jsx)("input",{type:"submit",value:"登入"})}),(0,o.jsx)("div",{className:em().links,children:(0,o.jsx)(_.Z,{onClick:()=>{s("Register")},btnText:(0,o.jsx)("span",{children:"尚未註冊會員？ 立即註冊"})})}),(0,o.jsx)("div",{className:em().links,children:(0,o.jsx)(_.Z,{btnText:(0,o.jsx)("span",{children:"——— 或選擇其他方式登入 ———"}),onClick:()=>a({account:"lala@mail.com",password:"wwwwqqqq"},{account:"",password:"",reenter_password:"",name:""},{account:""})})}),(0,o.jsx)("div",{className:em().links,children:(0,o.jsx)(ex,{})})]})]})})})}var ey=t(34853);let eC=(0,T.Z)({components:{MuiDialog:{styleOverrides:{paper:{overflow:"visible",borderRadius:"1rem",backgroundColor:"#343434",margin:"10px"}}}}});function ew(){let{registerState:e,registerData:n,registerErrors:t,quickInput:r,handleRegisterChange:i,registerSubmit:a,loginFormSwitch:s,recaptchaRef:c}=(0,O.NK)();return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(B.Z,{theme:eC,children:(0,o.jsx)(el.Z,{open:e,onClose:()=>s(),"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:(0,o.jsxs)("form",{className:em().forms,onSubmit:a,children:[(0,o.jsx)("div",{className:em().title,children:(0,o.jsx)(_.Z,{btnText:(0,o.jsx)("h3",{children:"會員註冊"}),onClick:()=>r({account:"ez003612@gmail.com",password:"asdasdasd"},{account:"ez003612@gmail.com",password:"qweqweqwe",reenter_password:"qweqweqwe",name:"銀耳機"},{account:"ez003612@gmail.com"})})}),(0,o.jsxs)("div",{className:em().box,children:[(0,o.jsx)(e_,{name:"account",type:"text",value:n.account,placeholder:"請輸入Email",onChange:i}),(0,o.jsx)("span",{className:em().errorText,children:t.account}),(0,o.jsx)(e_,{name:"password",type:"password",value:n.password,placeholder:"請輸入密碼",onChange:i})," ",(0,o.jsx)("span",{className:em().errorText,children:t.password}),(0,o.jsx)(e_,{name:"reenter_password",type:"password",value:n.reenter_password,placeholder:"請再次輸入密碼",onChange:i}),(0,o.jsx)("span",{className:em().errorText,children:t.reenter_password}),(0,o.jsx)(e_,{name:"name",type:"text",value:n.name,placeholder:"請輸入姓名",onChange:i}),(0,o.jsxs)("span",{className:em().errorText,children:[t.name,t.result]})]}),(0,o.jsx)("div",{className:em().links,children:(0,o.jsx)(ey.Z,{ref:c,theme:"dark",sitekey:"6Le-2xAqAAAAADHbVaVe5nndmuEYZZ7Uyw0FclUU"})}),(0,o.jsx)("div",{className:em().box,children:(0,o.jsx)("input",{type:"submit",value:"註冊"})}),(0,o.jsx)("div",{className:em().links,children:(0,o.jsx)(_.Z,{onClick:()=>{s("Login")},btnText:(0,o.jsx)("span",{children:"已有註冊會員？ 返回登入"})})}),(0,o.jsx)("div",{className:em().links,children:(0,o.jsx)("span",{children:"——— 或選擇其他方式註冊 ———"})}),(0,o.jsx)("div",{className:em().links,children:(0,o.jsx)(ex,{})})]})})})})}let eN=(0,T.Z)({components:{MuiDialog:{styleOverrides:{paper:{overflow:"visible",borderRadius:"1rem",backgroundColor:"#343434",margin:"10px"}}}}});function eZ(){let{forgotPasswordState:e,forgotPasswordData:n,forgotForgotPasswordErrors:t,quickInput:r,handleForgotPasswordChange:i,forgotPasswordSubmit:a,loginFormSwitch:s,formatTime:c}=(0,O.NK)();return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(B.Z,{theme:eN,children:(0,o.jsx)(el.Z,{open:e,onClose:()=>s(),"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:(0,o.jsxs)("form",{className:em().forms,onSubmit:a,children:[(0,o.jsx)("div",{className:em().title,children:(0,o.jsx)(_.Z,{btnText:(0,o.jsx)("h3",{children:"忘記密碼"}),onClick:()=>{r({account:"ez003612@gmail.com",password:"asdasdasd"},{account:"ez003612@gmail.com",password:"qweqweqwe",reenter_password:"qweqweqwe",name:"銀耳機"},{account:"ez003612@gmail.com"})}})}),(0,o.jsxs)("div",{className:em().box,children:[(0,o.jsx)(e_,{name:"account",type:"text",value:n.account,placeholder:"請輸入 Email",onChange:i}),(0,o.jsxs)("span",{className:em().errorText,children:[t.account,t.result]})]}),(0,o.jsx)("div",{className:em().box,children:(0,o.jsx)("input",{type:"submit",value:"ok"===c?"送出":"請等候 ".concat(c," 秒後才能重新發送"),disabled:"ok"!==c})}),(0,o.jsx)("div",{className:em().links,children:(0,o.jsx)(_.Z,{onClick:()=>{s("Login")},btnText:(0,o.jsx)("span",{children:"想起密碼了嗎？ 返回登入"})})}),(0,o.jsx)("div",{className:em().links,children:(0,o.jsx)("span",{children:"——— 或選擇其他方式登入 ———"})}),(0,o.jsx)("div",{className:em().links,children:(0,o.jsx)(ex,{})})]})})})})}function eT(){return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(ek,{}),(0,o.jsx)(ew,{}),(0,o.jsx)(eZ,{})]})}function eB(e){let{pageName:n}=e,[t,r]=(0,a.useState)("".concat(d()["menu-hide"]));return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("header",{className:d().navbar,children:[(0,o.jsx)(eT,{}),(0,o.jsxs)("nav",{children:[(0,o.jsx)(es,{handleMobileMenu:()=>{r("animate__bounceInDown"===t?"animate__bounceOutUp":"animate__bounceInDown")}}),(0,o.jsx)(ec,{pageName:n,menuState:t})]})]})})}var eS=t(83693),eD=t.n(eS);function eI(){return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("footer",{className:eD()["my-footer"],children:[(0,o.jsxs)("div",{children:[(0,o.jsx)(m(),{src:"/home/tree.png",alt:"footer-tree",width:1440,height:205,priority:!1}),(0,o.jsx)(m(),{src:"/home/tree.png",alt:"footer-tree",width:1440,height:205,priority:!1})]}),(0,o.jsx)("div",{children:(0,o.jsxs)("ul",{children:[(0,o.jsx)("li",{children:(0,o.jsxs)("ul",{children:[(0,o.jsx)("li",{children:(0,o.jsx)("p",{children:"聯絡我們"})}),(0,o.jsxs)("li",{children:[(0,o.jsx)("span",{children:"地址：天堂市地獄路444號4樓"}),(0,o.jsx)("span",{children:"電話：04 4444 4444"}),(0,o.jsx)("span",{children:"電子郵件：info@knock-knock.com"})]})]})}),(0,o.jsx)("li",{className:eD()["mobile-hide"],children:(0,o.jsx)("div",{})}),(0,o.jsxs)("li",{className:eD()["mobile-hide"],children:[(0,o.jsx)(m(),{src:"/home/ghost-logo.svg",alt:"ghost-logo",width:74,height:69}),(0,o.jsx)(m(),{src:"/home/LOGO.svg",alt:"LOGO",width:94,height:42})]}),(0,o.jsx)("li",{className:eD()["mobile-hide"],children:(0,o.jsx)("div",{})}),(0,o.jsxs)("li",{children:[(0,o.jsxs)("ul",{className:eD()["mobile-hide"],children:[(0,o.jsx)("li",{children:(0,o.jsx)("p",{children:"法律資訊"})}),(0,o.jsxs)("li",{children:[(0,o.jsx)(x(),{href:"/",children:(0,o.jsx)("span",{children:"隱私政策"})}),(0,o.jsx)(x(),{href:"/",children:(0,o.jsx)("span",{children:"使用條款"})}),(0,o.jsx)(x(),{href:"/",children:(0,o.jsx)("span",{children:"退款政策"})})]})]}),(0,o.jsx)("ul",{children:(0,o.jsxs)("li",{children:[(0,o.jsx)("p",{children:"追蹤我們"}),(0,o.jsx)(x(),{href:"/",children:(0,o.jsx)(f.Am9,{})}),(0,o.jsx)(x(),{href:"/",children:(0,o.jsx)(f.Zf_,{})}),(0,o.jsx)(x(),{href:"/",children:(0,o.jsx)(f.LCd,{})})]})})]})]})})]})})}var eF=t(44828),ez=t.n(eF);function eR(){let[e,n]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{let e=()=>{window.scrollY<100?n(!1):n(!0)};return window.addEventListener("scroll",e),()=>{window.removeEventListener("scroll",e)}},[]),(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("button",{onClick:()=>{window.scrollTo({top:0,behavior:"smooth"})},className:"".concat(ez()["top-btn"]," ").concat(e?ez().visible:""),children:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(m(),{src:"/ghost/ghost_15.png",alt:"top-button-default",width:100,height:84,className:"".concat(ez().default," animate__animated animate__pulse animate__infinite animate__slow"),priority:!1}),(0,o.jsx)(m(),{src:"/ghost/ghost_07.png",alt:"top-button-hover",width:100,height:84,className:"".concat(ez().hover," animate__animated animate__tada animate__infinite"),priority:!1})]})})})}t(48059);var eL=t(20373),eE=t(17824),eM=t.n(eE),eO=()=>(0,o.jsx)("div",{className:eM().spinnerOverlay,children:(0,o.jsx)(eL.Z,{color:"var(--sec-1)",size:80,"aria-label":"Loading Spinner","data-testid":"loader"})});function eq(e){let{children:n="",title:t="",pageName:r="",background:s=""}=e,[l,d]=(0,a.useState)(),[u,x]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{let e;let n=()=>{e=setTimeout(()=>x(!0),1200),d(!0)},t=()=>{clearTimeout(e),x(!1),d(!1)};return k().events.on("routeChangeStart",n),k().events.on("routeChangeComplete",t),k().events.on("routeChangeError",t),()=>{k().events.off("routeChangeStart",n),k().events.off("routeChangeComplete",t),k().events.off("routeChangeError",t)}},[]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("section",{className:"jsx-eb2768cea5ccc689 "+"layout ".concat(s),children:[(0,o.jsx)(c(),{children:(0,o.jsx)("title",{className:"jsx-eb2768cea5ccc689",children:"".concat(t?"".concat(t," | "):"").concat("悄瞧")})}),l&&u&&(0,o.jsx)(eO,{}),(0,o.jsx)(eB,{pageName:r}),(0,o.jsx)("main",{className:"jsx-eb2768cea5ccc689 main",children:n}),(0,o.jsx)(eR,{}),(0,o.jsx)(eI,{})]}),(0,o.jsx)(i(),{id:"eb2768cea5ccc689",children:'.layout.jsx-eb2768cea5ccc689{min-height:100vh;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;background-color:#fff}.light.jsx-eb2768cea5ccc689{background:url("/bg-light.png")no-repeat;background-attachment:fixed;-webkit-background-size:cover;-moz-background-size:cover;-o-background-size:cover;background-size:cover}.dark.jsx-eb2768cea5ccc689{background:url("/bg-dark.png")no-repeat;background-attachment:fixed;-webkit-background-size:cover;-moz-background-size:cover;-o-background-size:cover;background-size:cover}.main.jsx-eb2768cea5ccc689{-webkit-box-flex:1;-webkit-flex:1;-moz-box-flex:1;-ms-flex:1;flex:1}'})]})}},89077:function(e,n,t){"use strict";t.d(n,{Z:function(){return u}});var o=t(85893),r=t(66247),i=t.n(r),a=t(83886),s=t(747),c=t(61435),l=t(37140),d=t(64864);function u(e){let{children:n,title:t="標題",btnTextLeft:r="按鈕左",btnTextRight:u="按鈕右",btnLeftHidden:x=!1,btnRightHidden:p=!1,modalWidth:m="480px",modalHeight:h="auto",isOpen:f,handleClose:g,onClickRight:_=g,onClickLeft:j=g}=e,b=(0,a.Z)({components:{MuiDialog:{styleOverrides:{paper:{width:m,height:h,maxHeight:"640px",borderRadius:"var(--popup-radius)"}}}}});return(0,o.jsx)(s.Z,{theme:b,children:(0,o.jsx)(d.Z,{open:f,onClose:g,children:(0,o.jsxs)("div",{className:i().modalBody,children:[(0,o.jsx)("div",{className:i().title,children:t}),(0,o.jsx)("div",{className:i().modalContent,children:n}),(0,o.jsxs)("div",{className:i().btnBar,children:[!x&&(0,o.jsx)(l.Z,{btnText:r,onClick:j,href:null}),!p&&(0,o.jsx)(c.Z,{btnText:u,onClick:_,href:null})]})]})})})}},55750:function(e,n,t){"use strict";t.d(n,{Z:function(){return u}});var o=t(85893),r=t(93013),i=t.n(r),a=t(28047),s=t.n(a),c=t(57544);function l(e){let{label:n="label",content:t=0}=e;return(0,o.jsxs)("div",{className:s().totalRow,children:[(0,o.jsx)("p",{children:n}),(0,o.jsx)("p",{children:(0,c.T4)(t)})]})}var d=t(66641);function u(e){let{subtotal:n,deliverFee:t,checkoutTotal:r,totalDiscount:a}=e;return(0,o.jsxs)("div",{className:i().totalBox,children:[(0,o.jsx)(l,{label:"小計",content:n}),(0,o.jsx)(l,{label:"折扣",content:a}),(0,o.jsx)(l,{label:"運費",content:t}),(0,o.jsx)(d.Z,{margin:"0.75rem 0"}),(0,o.jsx)(l,{label:"合計",content:r})]})}},36109:function(e,n,t){"use strict";t.d(n,{Z:function(){return c}});var o=t(85893),r=t(31016),i=t.n(r),a=t(61435),s=t(11163);function c(){let e=(0,s.useRouter)();return(0,o.jsxs)("div",{className:i().emptyCartInfoContainer,children:[(0,o.jsx)("h6",{children:"購物車尚無商品"}),(0,o.jsx)(a.Z,{btnText:"前往桌遊商城",onClick:()=>{e.push("/product")},href:null,paddingType:"medium"})]})}},30078:function(e,n,t){"use strict";t.d(n,{Z:function(){return B}});var o=t(85893),r=t(67294),i=t(24296),a=t.n(i),s=t(375),c=t(98163),l=t(11663),d=t.n(l),u=t(85340);function x(e){let{onClick:n}=e;return(0,o.jsxs)(c.Z,{sx:{color:"white",padding:"0"},onClick:n,children:[(0,o.jsx)(u.if7,{}),(0,o.jsx)("small",{className:d().text,children:"使用說明"})]})}var p=t(57544),m=t(13264),h=t(80646),f=t(54425);let g=(0,m.Z)(h.Z)(e=>{let{theme:n,disabled:t=!1}=e;return{color:"white",cursor:t?"default":"pointer",pointerEvents:t?"none":"auto",opacity:t?.5:1,"&:hover svg":{color:t?"#757575":"var(--sec-1)"},svg:{color:t?"#757575":"#c7b081",width:24,height:24}}});function _(e){let{checked:n,onChange:t,disabled:r}=e;return(0,o.jsx)(g,{icon:(0,o.jsx)(f.KR6,{}),checkedIcon:(0,o.jsx)(f.vUq,{}),checked:n,onChange:t,disabled:r})}var j=t(54983),b=t.n(j),v=t(89077),k=t(79277),y=t.n(k);function C(e){let{label:n="標題",content:t="內容"}=e;return(0,o.jsxs)("div",{className:y().rowBox,children:[(0,o.jsx)("p",{children:n}),(0,o.jsx)("p",{children:t})]})}function w(e){var n,t,r,i;let{coupon:a,coupon_id:s,handleClose:c}=e;return(0,o.jsx)(v.Z,{title:"優惠卷使用說明",modalHeight:"720px",btnLeftHidden:!0,btnTextRight:"關閉",isOpen:!0,onClickRight:c,children:(0,o.jsxs)("div",{className:b().couponModalBody,children:[(0,o.jsx)(B,{coupon_name:a.coupon_name,minimum_order:a.minimum_order,valid_until:a.valid_until,btnHidden:!0,selectable:!1}),(0,o.jsxs)("div",{className:b().couponTable,children:[(0,o.jsx)(C,{label:"有效期限",content:a.valid_until}),(0,o.jsx)(C,{label:"優惠內容",content:(n=a.discount_amount,t=a.discount_percentage,n?"結帳滿 ".concat((0,p.My)(a.minimum_order),"元，即可折抵 ").concat((0,p.My)(a.discount_amount),"元。"):t?"結帳滿 ".concat((0,p.My)(a.minimum_order),"元，即可享 ").concat((0,p.My)(a.discount_percentage)," 折。"):void 0)}),(0,o.jsx)(C,{label:"適用商品",content:a.coupon_type_name}),(0,o.jsx)(C,{label:"優惠詳情",content:(r=a.discount_amount,i=a.discount_percentage,r?"".concat(a.coupon_type_name,"滿 ").concat((0,p.My)(a.minimum_order),"\n        元（不含運費），即可折抵 ").concat((0,p.My)(a.discount_amount)," \n        元。請在購物車/結帳頁內全站優惠券入口輸入或選用，同一帳號/同一人限使用 ").concat(a.max_usage_per_user," 次。"):i?"".concat(a.coupon_type_name,"滿 ").concat((0,p.My)(a.minimum_order),"\n        元（不含運費），即可享 ").concat((0,p.My)(a.discount_percentage)," 折，最高折抵 ").concat(a.discount_max," 元。請在購物車/結帳頁內全站優惠券入口輸入或選用，同一帳號/同一人限使用 ").concat(a.max_usage_per_user," 次。"):void 0)}),2===a.coupon_type_id&&(0,o.jsx)(C,{label:"指定商品詳情",content:a.products.map(e=>e.product_name).join(", ")})]})]})})}var N=t(39019),Z=t.n(N);function T(e){let{tagText:n}=e;return(0,o.jsx)("div",{className:Z().tagBox,children:n})}function B(e){let n,{status:t="ongoing",coupon_id:i,coupon_name:c,minimum_order:l,valid_until:d,isChecked:u,handelSelectedToggle:m,coupon:h,selectable:f=!0,btnHidden:g=!1,disabled:j}=e,[b,v]=(0,r.useState)(!1),[k,y]=(0,r.useState)(u);return(0,r.useEffect)(()=>{y(u)},[u]),(0,o.jsxs)(s.E.div,{className:j?"".concat(a().cardBg," ").concat(a().cardBgDisabled):u?"".concat(a().cardBg," ").concat(a().cardBgChecked):"".concat(a().cardBg),whileHover:{scale:1.03},transition:{type:"spring",stiffness:100,damping:20},children:[(0,o.jsxs)("div",{className:(e=>{switch(t){case"ongoing":return"".concat(e);case"used":case"expired":return"".concat(e," ").concat(a().history);default:return e}})(a().couponCard),children:[(0,o.jsxs)("div",{className:(n="".concat(a().couponCardLeft),j?n+=" ".concat(a().couponCardLeftDisabled):u&&(n+=" ".concat(a().couponCardLeftChecked)),n),children:[f&&(0,o.jsx)("div",{className:a().checkboxContainer,children:(0,o.jsx)(_,{checked:k,onChange:()=>{y(!k),m(i)},disabled:j})}),(0,o.jsx)("img",{src:"/ghost/ghost_11.png",alt:"",className:a().webGhostImg})]}),(0,o.jsx)("div",{className:j?"".concat(a().couponCardRightDisabled," ").concat(a().couponCardRight):a().couponCardRight,children:(0,o.jsxs)("div",{className:a().couponInfo,children:[(0,o.jsx)("p",{children:c}),(0,o.jsxs)("div",{className:a().textBox,children:[(0,o.jsxs)("small",{children:["最低消費：",(0,p.T4)(l)]}),(0,o.jsxs)("small",{children:["有效期限：",d]})]}),!g&&(0,o.jsx)(x,{onClick:()=>{v(!0)}}),j&&(0,o.jsx)(T,{tagText:"不符合資格"}),(0,o.jsx)("img",{src:"/ghost/ghost_11.png",alt:"",className:a().appGhostImg})]})})]}),b&&(0,o.jsx)(w,{coupon_id:i,coupon:h,handleClose:()=>{v(!1)}})]})}},69904:function(e,n,t){"use strict";t.d(n,{Z:function(){return T}});var o=t(85893),r=t(10805),i=t.n(r),a=t(67294),s=t(11163),c=t(28552),l=t(16075),d=t(62325),u=t(97928),x=t(89077),p=t(30078),m=t(43036),h=t(89262),f=t(98163);let g=(0,h.ZP)(f.Z)(e=>{let{type:n}=e;return{color:"var(--sec-1)",fontFamily:'"Noto Serif JP", serif',fontSize:"13px",minWidth:"2rem",padding:"1px 6px",border:"1px solid var(--sec-1)","&:hover":{color:"#8C764C",border:"1px solid #8C764C",backgroundColor:"#F8F5F2"}}});function _(e){let{btnText:n,type:t="def",href:r=null,onClick:i}=e;return(0,o.jsx)(g,{size:"medium",type:t,href:r,onClick:i,children:n})}var j=t(63700),b=t.n(j);function v(e){let{btnText:n="按鈕",href:t=null,margin:r="0",marginLeft:i="0",onClick:a=()=>{}}=e;return(0,o.jsx)(f.Z,{onClick:a,href:t,variant:"outlined",sx:{color:"black",fontFamily:"Noto Serif JP",fontSize:"16px",fontWeight:"normal",borderRadius:"0 6px 6px 0",margin:r,marginLeft:i,border:"2px solid #d9d9d9",lineHeight:"normal",height:"40px",":hover":{color:"white",backgroundColor:"var(--pri-1)"}},children:n})}function k(e){let{content:n="請選擇優惠券",btnText:t="全站優惠券",onClick:r}=e,i=n.includes("請選擇")?"Silver":"var(---pri-1)";return(0,o.jsxs)("div",{className:b().couponBox,children:[(0,o.jsx)("div",{className:b().content,style:{color:i},children:n}),(0,o.jsx)(v,{btnText:t,onClick:r})]})}var y=t(92191),C=t.n(y),w=t(84295);function N(e){let{coupon_name:n}=e;return(0,o.jsxs)("div",{className:C().tagBox,children:[(0,o.jsx)(w.ETl,{}),n]})}var Z=t(35514);function T(e){let{type:n="all",product_id:t=0}=e,{checkoutItems:r,usableCoupons:h,usableProductCoupons:f,handleAddCouponToCart:g,handleRemoveCouponFromCart:j,selectedCoupons:b,selectedProductCoupons:v,excludeProductCouponTotal:y}=(0,c.j)(),{auth:C,authIsReady:w}=(0,l.aC)(),T=(0,s.useRouter)(),{loginFormSwitch:B}=(0,d.NK)(),[S,D]=(0,a.useState)(!1),{openSnackbar:I}=(0,u.Ds)(),[F,z]=(0,a.useState)(null),[R,L]=(0,a.useState)(!1),E=()=>{S?L(!0):B("Login")},[M,O]=(0,a.useState)("選擇全站優惠券"),q=e=>"product"===n?f.find(n=>n.coupon_id===e)||{}:h.find(n=>n.coupon_id===e)||{},P="product"===n?f.filter(e=>e.products.some(e=>e.product_id===t)):h,A=e=>"product"===n?v.some(n=>n.coupon_id===e&&n.product_id===t):b.some(n=>n.coupon_id===e),H=async(e,o)=>{if(o&&(await j(e,t),I("不套用優惠券","success")),!o){if("product"===n)for(let n of v)n.coupon_id===e&&await j(e,n.product_id);if("all"===n)for(let e of b)j(e.coupon_id,t);g(e,t),I("已套用優惠券","success")}},W=()=>{let e;if(t){let n=v.find(e=>e.product_id===t);n&&(e=n.coupon_name)}z(e)},G=()=>{b.length>0?O(b.map(e=>e.coupon_name).join(", ")):O("請選擇優惠券")},J=e=>{let o;if("product"===n){let{price:n,cart_product_quantity:i}=r.find(e=>e.product_id===t);o=!(n*i>=f.find(n=>n.coupon_id===e).minimum_order)}else o=!(y>h.find(n=>e==e).minimum_order);return o};return(0,a.useEffect)(()=>{null!==t&&W()},[v,t]),(0,a.useEffect)(()=>{b&&G()},[b]),(0,a.useEffect)(()=>{T.isReady&&w&&(C.id?D(!0):D(!1))},[C.id,T.isReady,w]),(0,o.jsxs)(o.Fragment,{children:["product"===n?(0,o.jsxs)("div",{className:i().productCouponBtnStack,children:[(0,o.jsx)(_,{type:"button",btnText:"優惠券",href:null,onClick:E}),F&&(0,o.jsx)(N,{coupon_name:F})]}):(0,o.jsx)(k,{onClick:E,content:M}),P.length>=0&&(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(x.Z,{title:"選擇優惠券",modalHeight:"720px",btnTextRight:"關閉",btnLeftHidden:!0,onClickRight:()=>L(!1),isOpen:R,children:(0,o.jsxs)("div",{className:i().modalContentBox,children:[0===P.length?(0,o.jsx)(m.Z,{text:"無優惠券"}):P.map(e=>(0,o.jsx)(p.Z,{status:"ongoing",coupon_id:e.coupon_id,coupon_name:e.coupon_name,minimum_order:e.minimum_order,valid_until:e.valid_until,isChecked:A(e.coupon_id),handelSelectedToggle:()=>H(e.coupon_id,A(e.coupon_id)),coupon:q(e.coupon_id),disabled:J(e.coupon_id)},e.coupon_id)),(0,o.jsx)(Z.Z,{btnText:"優惠券抽獎活動",onClick:()=>{T.push("/coupon")}})]})})})]})}},57850:function(e,n,t){"use strict";t.d(n,{Z:function(){return B}});var o=t(85893),r=t(30350),i=t.n(r),a=t(67294),s=t(11163),c=t(28552),l=t(33367),d=t(89262),u=t(53853),x=t.n(u),p=t(7820),m=t(54677),h=t(11828);function f(e){let{minValue:n=0,maxValue:t=10,stepperValue:r=1,onQuantityChange:i,productName:s,productId:u,couponId:f,minimumOrder:g,price:_}=e,[j,b]=(0,a.useState)(r),{openConfirmDialog:v}=(0,p.W)(),{handleRemoveCouponFromCart:k}=(0,c.j)();(0,a.useEffect)(()=>{b(r)},[r]);let y=(0,d.ZP)(l.Z)(e=>{let{theme:n}=e;return{backgroundColor:"white",width:"1.4rem",height:"1.4rem",border:"1px solid var(--input-grey)",padding:"4px","&:hover":{backgroundColor:"var(--pri-3)"}}});return(0,o.jsxs)("div",{className:x().stepperInputContainer,children:[(0,o.jsx)(y,{onClick:()=>{if(+j<=n)return;if(1==+j){v(()=>{b(n),i(n)});return}let e=+j-1;b(e),i(e),f&&e*_<g&&k(f,u)},children:(0,o.jsx)(h.Lqh,{})}),(0,o.jsx)("div",{className:x().stepperValue,children:j}),(0,o.jsx)(y,{onClick:()=>{if(+j>=t)return;let e=+j+1;b(e),i(e)},children:(0,o.jsx)(h.gyF,{})}),(0,o.jsx)(m.Z,{dialogTitle:"確定要刪除商品「".concat(s,"」嗎？"),btnTextRight:"確定刪除",btnTextLeft:"取消"})]})}var g=t(21173),_=t(48292),j=t(50506),b=t.n(j);t(71161);var v=t(18644),k=t(63123),y=t(54788);function C(e){let{product_id:n}=e,{toggleButton:t,animate:r,data:i}=(0,y.d)(n);return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(l.Z,{onClick:t,"aria-label":"favorite",size:"large",className:r?b().addToFavoriteIcon:"",children:i.includes(n)?(0,o.jsx)(k.Z,{style:{fill:"rgba(164, 49, 49, 1)"}}):(0,o.jsx)(v.Zwb,{className:b().addToFavoriteIcon})})})}var w=t(69904),N=t(98163);function Z(e){let{btnText:n="button",productId:t}=e;(0,s.useRouter)();let r=()=>{window.location.href="/product/product-details/".concat(t)};return(0,o.jsx)(N.Z,{variant:"text",onClick:()=>{r()},sx:{margin:"0",marginLeft:"-4px",padding:"0",color:"var(--pri-1)",fontWeight:"bold",fontFamily:"Noto Serif JP",fontSize:"1.125rem","&:hover":{backgroundColor:"transparent",color:"var(--sec-1)"}},children:n})}var T=t(45747);function B(e){let{type:n="def"}=e,{checkoutItems:t,usableProductCoupons:r,handleQuantityChange:l,calculateProductDiscount:d}=(0,c.j)();(0,s.useRouter)();let u="small"===n?i().itemInfoSmall:i().itemInfo;return(0,a.useEffect)(()=>{d()},[r]),(0,o.jsx)(o.Fragment,{children:t.map((e,n)=>{let t=r.some(n=>2===n.coupon_type_id&&n.products.some(n=>n.product_id===e.product_id));return(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:i().itemBox,children:[(0,o.jsx)(g.Z,{imgSrc:"".concat(T.DI,"/").concat(e.product_img),productId:e.product_id}),(0,o.jsxs)("div",{className:u,children:[(0,o.jsxs)("div",{className:i().itemNamePriceBox,children:[(0,o.jsx)(Z,{btnText:e.product_name,productId:e.product_id}),(0,o.jsx)(_.Z,{originalPrice:e.price,discountedPrice:d(e.price,e.cart_product_quantity,e.discount_amount,e.discount_percentage,e.minimum_order)})]}),(0,o.jsx)(f,{stepperValue:e.cart_product_quantity,onQuantityChange:n=>l(e.product_id,n),productName:e.product_name,productId:e.product_id,couponId:e.cart_product_coupon_id,minimumOrder:e.minimum_order,price:e.price})]}),(0,o.jsx)(C,{product_id:e.product_id})]}),t&&(0,o.jsx)(w.Z,{type:"product",product_id:e.product_id})]},e.product_id)})})}},48292:function(e,n,t){"use strict";t.d(n,{Z:function(){return s}});var o=t(85893),r=t(63308),i=t.n(r),a=t(57544);function s(e){let{discountedPrice:n,originalPrice:t}=e;return(0,o.jsxs)("div",{className:i().itemPriceStyle,children:[(0,o.jsx)("p",{children:n>0?(0,a.T4)(n):(0,a.T4)(t)}),(0,o.jsx)("small",{children:n>0&&n!==t?(0,a.T4)(t):null})]})}},21173:function(e,n,t){"use strict";t.d(n,{Z:function(){return d}});var o=t(85893),r=t(97200),i=t.n(r),a=t(98163),s=t(375),c=t(11163),l=t(43036);function d(e){let{imgSrc:n="",imgAlt:t="knock_knock_product_image",width:r="6.25rem",height:d="6.25rem",radius:u="1rem",smallWidth:x="5.75rem",smallHeight:p="5.75rem",smallRadius:m="0.75rem",productId:h}=e;(0,c.useRouter)();let f=()=>{window.location.href="/product/product-details/".concat(h)};return(0,o.jsx)(a.Z,{sx:{padding:"0",margin:"0",borderRadius:"var(--img-radius)","&:hover":{backgroundColor:"transparent"}},onClick:()=>{f()},children:(0,o.jsx)(s.E.div,{className:i().itemImgBox,style:{"--img-width":r,"--img-height":d,"--img-radius":u,"--small-img-width":x,"--small-img-height":p,"--small-img-radius":m},initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},transition:{duration:.8,delay:.3,ease:[0,.71,.2,1.01]},children:n?(0,o.jsx)(s.E.img,{src:"".concat(n,".jpg"),alt:t}):(0,o.jsx)(l.Z,{text:"無商品圖",borderRadius:"0rem"})})})}t(67294)},57544:function(e,n,t){"use strict";t.d(n,{My:function(){return o},T4:function(){return r},n4:function(){return i},p6:function(){return a}});let o=e=>new Intl.NumberFormat("en-IN",{minimumFractionDigits:0,maximumFractionDigits:2}).format(e),r=e=>{let n=new Intl.NumberFormat("en-IN",{minimumFractionDigits:0,maximumFractionDigits:2}).format(+e);return"$".concat(n)},i=e=>new Date(e).toLocaleDateString("zh-TW",{weekday:"long",year:"numeric",month:"short",day:"numeric"}),a=e=>new Date(e).toLocaleDateString("zh-TW",{year:"numeric",month:"short",day:"numeric"})},54788:function(e,n,t){"use strict";t.d(n,{d:function(){return s}});var o=t(67294),r=t(45747),i=t(97928);t(71161);var a=t(16075);let s=e=>{let{auth:n,authIsReady:t}=(0,a.aC)(),{openSnackbar:s}=(0,i.Ds)(),[c,l]=(0,o.useState)(!1),[d,u]=(0,o.useState)([]),[x,p]=(0,o.useState)(!1),m=e=>{let n=[...d];d.includes(e)?d.includes(e)?n=n.filter(n=>n!==e):console.log("dataChange出錯了"):n.push(e),u(n)},h=async n=>{n=n||1;let t="".concat(r.kD,"/api?user_id=").concat(n),o=[];try{let n=await fetch(t),r=await n.json();r.success&&(r.rows.map(e=>{o.push(e.fav_product_id)}),p(o.includes(e)),u(o))}catch(e){console.error(e)}};return(0,o.useEffect)(()=>{h(n.id)},[e,t]),{toggleButton:async t=>{if(x)try{await fetch("".concat(r.kD,"/delete/").concat(e,"?user_id=").concat(n.id),{method:"DELETE"}),m(e),s("已取消收藏","error"),l(!0),setTimeout(()=>{l(!1)},2e3)}catch(e){console.log("DELETE",e)}else try{await fetch("".concat(r.kD,"/add/").concat(e,"?user_id=").concat(n.id),{method:"POST"}),m(e),s("成功加入收藏")}catch(e){console.log(e)}p(!x)},animate:c,data:d}}},83693:function(e){e.exports={"my-footer":"footer-styles_my-footer__yOlq9","mobile-hide":"footer-styles_mobile-hide__znfLQ"}},60451:function(e){e.exports={navbar:"nav-styles_navbar__6kgbF","nav-menu-hide":"nav-styles_nav-menu-hide__Snbcs","logo-screen":"nav-styles_logo-screen__8X4mo","page-name":"nav-styles_page-name__Ztdny","navbar-links":"nav-styles_navbar-links__ZQbfp","menu-hide":"nav-styles_menu-hide__3UNbu","navbar-icon":"nav-styles_navbar-icon__tHGyp","nav-menu":"nav-styles_nav-menu__DH3tM","logo-mobile":"nav-styles_logo-mobile__vaoMe",menu:"nav-styles_menu__36dWT"}},44828:function(e){e.exports={"top-btn":"top-btn_top-btn__WXII8",visible:"top-btn_visible__hYgN7",default:"top-btn_default__GannA",hover:"top-btn_hover__K6x60"}},23739:function(e){e.exports={inputDefault:"input_inputDefault__1r2Z_",inputDisabled:"input_inputDisabled__Dessx",input:"input_input__lg5ZW",eyeIcon:"input_eyeIcon__CXQMA"}},7994:function(e){e.exports={forms:"login-form_forms__mdq6Y",title:"login-form_title__JClhW",box:"login-form_box__u8JoE",errorText:"login-form_errorText__lppld",box2:"login-form_box2__DeEGS",links:"login-form_links__bENZ5",ghost:"login-form_ghost__TpQuU"}},61930:function(e){e.exports={dialogImg:"confirm-dialog_dialogImg__OQWAH",dialogTitle:"confirm-dialog_dialogTitle___AtMp",btnStack:"confirm-dialog_btnStack__xKCaw"}},53853:function(e){e.exports={stepperInputContainer:"input-stepper_stepperInputContainer__ccGDb",stepperValue:"input-stepper_stepperValue__ZHSEk"}},17824:function(e){e.exports={spinnerOverlay:"loading-spinner_spinnerOverlay__lRIKk"}},39224:function(e){e.exports={noDataBox:"no-data_noDataBox__mOWG3",imgTextBox:"no-data_imgTextBox__ZqPEg"}},66247:function(e){e.exports={modalBody:"modal-layout_modalBody__5slYm",title:"modal-layout_title__iJRkL",modalContent:"modal-layout_modalContent__9Wvd1",btnBar:"modal-layout_btnBar__qrJkG"}},63700:function(e){e.exports={couponBox:"checkout-coupon-btn_couponBox__UBduT",content:"checkout-coupon-btn_content__LYRZS"}},53724:function(e){e.exports={drawerContainer:"checkout-offcanvas_drawerContainer__pnTc5",checkoutTitle:"checkout-offcanvas_checkoutTitle__UaNJi",cartItemCount:"checkout-offcanvas_cartItemCount___p5uD",checkoutList:"checkout-offcanvas_checkoutList__FcDT_",checkoutBottom:"checkout-offcanvas_checkoutBottom__hykXH"}},28047:function(e){e.exports={totalRow:"checkout-total-row_totalRow__XeY7e"}},93013:function(e){e.exports={totalBox:"checkout-total-table_totalBox__fglg9"}},31016:function(e){e.exports={emptyCartInfoContainer:"empty-cart_emptyCartInfoContainer__bYCzJ"}},24296:function(e){e.exports={cardBg:"coupon-card_cardBg__SUjMd",cardBgChecked:"coupon-card_cardBgChecked__qQmQv",cardBgDisabled:"coupon-card_cardBgDisabled__hkN1_",checkboxContainer:"coupon-card_checkboxContainer__8Bq7J",couponCard:"coupon-card_couponCard__3jQj0",couponCardLeft:"coupon-card_couponCardLeft__kUqLk",couponCardRight:"coupon-card_couponCardRight__ebf_1",history:"coupon-card_history__xOTme",webGhostImg:"coupon-card_webGhostImg__4Bzwu",couponInfo:"coupon-card_couponInfo__hKxih",textBox:"coupon-card_textBox__fOhot",couponCardLeftChecked:"coupon-card_couponCardLeftChecked__l5HDc",couponCardLeftDisabled:"coupon-card_couponCardLeftDisabled__eOGWw",couponCardRightDisabled:"coupon-card_couponCardRightDisabled__vTabL",appGhostImg:"coupon-card_appGhostImg__P86Ss"}},39019:function(e){e.exports={tagBox:"coupon-tag_tagBox__waAHH"}},11663:function(e){e.exports={text:"more-info-text-btn_text__5Bs4t"}},79277:function(e){e.exports={rowBox:"coupon-info-row_rowBox__7spMR"}},54983:function(e){e.exports={couponModalBody:"coupon-more-info-modal_couponModalBody__DiqWs",couponTable:"coupon-more-info-modal_couponTable__D0OUC"}},10805:function(e){e.exports={modalContentBox:"coupon-select-modal_modalContentBox__lCURc",couponBox:"coupon-select-modal_couponBox__3jjZz",couponTag:"coupon-select-modal_couponTag__3xcHk",productCouponBtnStack:"coupon-select-modal_productCouponBtnStack__6FT_N"}},92191:function(e){e.exports={tagBox:"product-coupon-tag_tagBox__gFypj"}},30350:function(e){e.exports={itemBox:"order-item-checkout_itemBox__VlKZX",itemInfo:"order-item-checkout_itemInfo__GYx00",itemInfoSmall:"order-item-checkout_itemInfoSmall__wl73z",itemNamePriceBox:"order-item-checkout_itemNamePriceBox__TI830",addToFavoriteIcon:"order-item-checkout_addToFavoriteIcon__JzjQw",itemPriceStyle:"order-item-checkout_itemPriceStyle__FN4R0"}},63308:function(e){e.exports={itemPriceStyle:"order-price-box_itemPriceStyle__7u6rC"}},97200:function(e){e.exports={itemImgBox:"order-product-img-box_itemImgBox__qkeN6"}},50506:function(e){e.exports={likeStyle:"favorite-icon_likeStyle__CSR2D",likeBefore:"favorite-icon_likeBefore__8BZ8H",unlike:"favorite-icon_unlike__Dr_DO",unlikeStyle:"favorite-icon_unlikeStyle__CyIGc",addToFavoriteIcon:"favorite-icon_addToFavoriteIcon__K3ryH"}}}]);