(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4446],{3465:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/user/orders/details/[order_id]",function(){return t(26736)}])},44760:function(e,r,t){"use strict";t.d(r,{Z:function(){return l}});var n=t(85893),i=t(99785),o=t.n(i),s=t(33367),a=t(35514),d=t(66641),c=t(84295);function l(e){let{type:r="def",title:t="標題",btnHref:i=null,btnHidden:l=!1,btnText:u="按鈕",onClickBtn:_,onClickBack:x=()=>{window.history.back()}}=e;return(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:o().orderDetailHeader,children:[(0,n.jsxs)("div",{className:o().headerLeft,children:["icon"===r&&(0,n.jsx)(s.Z,{onClick:x,href:null,children:(0,n.jsx)(c.Wuc,{className:o().iconStyles})}),(0,n.jsx)("h5",{children:t})]}),!l&&(0,n.jsx)(a.Z,{btnText:u,href:i,onClick:_})]}),(0,n.jsx)(d.Z,{margin:"1.5rem 0"})]})}},22535:function(e,r,t){"use strict";t.d(r,{Z:function(){return l}});var n=t(85893),i=t(11163),o=t(41664),s=t.n(o),a=t(98216),d=t.n(a),c=t(78773);function l(){let e=(0,i.useRouter)(),r=r=>r.some(r=>e.pathname.startsWith(r));return(0,n.jsx)("ul",{className:d().userTab,children:[{key:"profile",name:"會員資料",link:"/user/profile",paths:["/user/profile","/user/reset-password"]},{key:"reservation",name:"行程預約",link:"/user/reservation/ongoing",paths:["/user/reservation"]},{key:"orders",name:"商品訂單",link:"/user/orders/ongoing",paths:["/user/orders"]},{key:"favorite",name:"我的收藏",link:"/user/favorite",paths:["/user/favorite"]},{key:"coupons",name:"優惠券",link:"/user/coupon/ongoing",paths:["/user/coupon"]}].map((e,t)=>(0,n.jsx)("li",{className:r(e.paths)?d().active:"",children:(0,n.jsxs)(s(),{href:e.link,children:[(0,n.jsx)(c.ycZ,{}),(0,n.jsx)("span",{children:e.name})]})},e.key))})}},96345:function(e,r,t){"use strict";t.d(r,{Z:function(){return s}});var n=t(85893);t(67294);var i=t(5024),o=t.n(i);function s(e){let{userTab:r,userTabSec:t,sectionRight:i}=e;return(0,n.jsx)("section",{className:o().sectionContainer,children:(0,n.jsxs)("div",{className:o().sectionBody,children:[r,(0,n.jsxs)("div",{className:o().sectionRight,children:[t,i]})]})})}},63007:function(e,r,t){"use strict";t.d(r,{Z:function(){return d}});var n=t(85893),i=t(594),o=t.n(i),s=t(57544),a=t(19719);function d(e){let{order_date:r,merchant_trade_no:t,deliver_fee:i,total_price:d,payment_date:c,payment_type:l,full_address:u,order_status_id:_,discount_total:x,order_status_name:f,paymentHidden:h=!1}=e;return(0,n.jsxs)("div",{className:o().orderInfoBox,children:[(0,n.jsx)(a.Z,{label:"訂單日期",content:(0,s.p6)(r)}),!!t&&(0,n.jsx)(a.Z,{label:"訂單編號",content:t}),!h&&(0,n.jsx)(a.Z,{label:"折扣",content:(0,s.T4)(x)}),!h&&(0,n.jsx)(a.Z,{label:"運費",content:(0,s.T4)(i)}),!h&&(0,n.jsx)(a.Z,{label:"合計",content:(0,s.T4)(d)}),!h&&!!c&&(0,n.jsx)(a.Z,{label:"付款時間",content:"".concat(c," / ").concat(l)}),!h&&(0,n.jsx)(a.Z,{label:"地址",content:u}),(0,n.jsx)(a.Z,{status:f})]})}},19719:function(e,r,t){"use strict";t.d(r,{Z:function(){return s}});var n=t(85893),i=t(48465),o=t.n(i);function s(e){let{label:r,content:t}=e;return(0,n.jsxs)("div",{className:o().iconTextRow,children:[(0,n.jsx)("p",{className:o().label,children:r}),(0,n.jsx)("p",{children:t})]})}},265:function(e,r,t){"use strict";t.d(r,{Z:function(){return d}});var n=t(85893),i=t(98451),o=t.n(i),s=t(21173),a=t(48292);function d(e){let{productId:r=0,productName:t="產品名稱",originalPrice:i=0,discountedPrice:d=0,productImg:c="",orderQty:l=1}=e;return(0,n.jsxs)("div",{className:o().itemBox,children:[(0,n.jsx)(s.Z,{imgSrc:c,productId:r}),(0,n.jsxs)("div",{className:o().itemInfo,children:[(0,n.jsx)("p",{children:t}),(0,n.jsxs)("div",{className:o().qtyPriceStack,children:[(0,n.jsxs)("div",{className:o().qty,children:["x ",l]}),(0,n.jsx)(a.Z,{originalPrice:i,discountedPrice:d})]})]})]})}},8227:function(e,r,t){"use strict";var n=t(67294),i=t(87066),o=t(45747);r.Z=()=>{let[e,r]=(0,n.useState)([]),[t,s]=(0,n.useState)([]),[a,d]=(0,n.useState)(!1);return{order:e,detail:t,anyReviewed:a,fetchOrderData:async e=>{try{let t=await i.Z.get("".concat(o.VO,"/").concat(e));if(t.data.status){let e=t.data.orderDetails.find(e=>1==e.review_status);d(!!e),r(t.data.orders[0]),s(t.data.orderDetails)}}catch(e){console.error("Error fetching order and order detail data:",e)}}}}},26736:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return Z}});var n=t(85893),i=t(67294),o=t(11163),s=t(53483),a=t(96345),d=t(22535),c=t(16519),l=t.n(c),u=t(28552),_=t(8227),x=t(265),f=t(41992),h=t.n(f),v=t(35514);function m(e){let{order_id:r,content:t="喜歡您的商品嗎？<br />請留下您大大的讚賞！",btnText:i="評價"}=e;return(0,n.jsxs)("div",{className:h().orderReviewHintBox,children:[(0,n.jsx)("img",{src:"/ghost/ghost_05.png",alt:""}),(0,n.jsxs)("div",{className:h().orderReviewDialog,children:[(0,n.jsx)("p",{dangerouslySetInnerHTML:{__html:t}}),(0,n.jsx)(v.Z,{btnText:i,href:"/user/orders/details/reviews/".concat(r)})]})]})}var p=t(44760),j=t(63007),g=t(45747);function y(e){let{order_id:r}=e,t=(0,o.useRouter)(),{order:s,detail:a,anyReviewed:d,fetchOrderData:c}=(0,_.Z)(),[f,h]=(0,i.useState)(!1),{calculateProductDiscount:v}=(0,u.j)();return(0,i.useEffect)(()=>{c(r)},[r,d]),(0,i.useEffect)(()=>{1===s.deliver?h(!0):h(!1)},[s]),(0,n.jsxs)("div",{className:l().orderDetailContainer,children:[(0,n.jsx)(p.Z,{type:"icon",title:"訂單明細",btnText:"發票",btnHidden:(()=>{if(s)return 1!==s.invoice_rtn_code})(),onClickBtn:()=>{t.push("/user/orders/details/invoice/".concat(r))}}),(0,n.jsxs)("div",{className:l().orderDetailContent,children:[(0,n.jsx)("div",{className:l().orderDetailLeft,children:a.map((e,r)=>(0,n.jsx)(x.Z,{productId:e.product_id,productName:"".concat(e.product_name),originalPrice:e.order_unit_price,discountedPrice:v(e.order_unit_price,e.order_quantity,e.discount_amount,e.discount_percentage,e.minimum_order),productImg:e.product_img?"".concat(g.DI,"/").concat(e.product_img):"",orderQty:e.order_quantity},e.product_id))}),(0,n.jsxs)("div",{className:l().orderDetailRight,children:[(0,n.jsx)(j.Z,{order_date:null==s?void 0:s.order_date,merchant_trade_no:null==s?void 0:s.merchant_trade_no,payment_type:null==s?void 0:s.payment_type,subtotal_price:null==s?void 0:s.subtotal_price,deliver_fee:null==s?void 0:s.deliver_fee,discount_total:null==s?void 0:s.discountTotal,total_price:(null==s?void 0:s.subtotal_price)+(null==s?void 0:s.deliver_fee)-(null==s?void 0:s.discountTotal),payment_date:null==s?void 0:s.payment_date,full_address:null==s?void 0:s.full_address,order_status_name:null==s?void 0:s.order_status_name}),f&&(0,n.jsx)(m,{order_id:r,content:d?"已收到您的評價！":void 0,btnText:d?"查看評價":void 0})]})]})]})}function Z(){let{order_id:e}=(0,o.useRouter)().query;return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(s.Z,{title:"訂單詳情",pageName:"user",background:"light",children:(0,n.jsx)(a.Z,{userTab:(0,n.jsx)(d.Z,{}),sectionRight:(0,n.jsx)(y,{order_id:e})})})})}},99785:function(e){e.exports={orderDetailHeader:"user-header_orderDetailHeader__kbfpq",headerLeft:"user-header_headerLeft__Pnam1",iconStyles:"user-header_iconStyles__HOlLP"}},98216:function(e){e.exports={userTab:"user-tab_userTab__oitHd",active:"user-tab_active__WQZR9"}},5024:function(e){e.exports={sectionContainer:"user-layout_sectionContainer__ZrxdZ",sectionBody:"user-layout_sectionBody__cHqmz",sectionRight:"user-layout_sectionRight__pqtpQ"}},16519:function(e){e.exports={orderDetailContainer:"order-detail-cards_orderDetailContainer__wdbhj",orderDetailContent:"order-detail-cards_orderDetailContent__Z3TUv",orderDetailLeft:"order-detail-cards_orderDetailLeft__1odQi",orderDetailRight:"order-detail-cards_orderDetailRight__I6ldo",orderInfoRow:"order-detail-cards_orderInfoRow__UHuVD",orderDetailBox:"order-detail-cards_orderDetailBox__4kdWx"}},594:function(e){e.exports={orderInfoBox:"order-detail-info_orderInfoBox__HuEgN"}},48465:function(e){e.exports={iconTextRow:"order-detail-row_iconTextRow__r0_MW",label:"order-detail-row_label__XXdNe"}},98451:function(e){e.exports={itemBox:"order-item-detail_itemBox__Y_9DS",itemInfo:"order-item-detail_itemInfo__nZ8Ss",qty:"order-item-detail_qty__GV33w",qtyPriceStack:"order-item-detail_qtyPriceStack__wBgBu"}},41992:function(e){e.exports={orderReviewHintBox:"order-review-dialog_orderReviewHintBox__Hlhop",orderReviewDialog:"order-review-dialog_orderReviewDialog__7vU0o"}}},function(e){e.O(0,[5970,4838,9317,4396,6660,509,2961,4321,959,6497,3483,2888,9774,179],function(){return e(e.s=3465)}),_N_E=e.O()}]);