(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2602],{34970:function(e,i,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/user/orders/details/invoice/[order_id]",function(){return n(25e3)}])},22535:function(e,i,n){"use strict";n.d(i,{Z:function(){return l}});var t=n(85893),s=n(11163),r=n(41664),c=n.n(r),o=n(98216),a=n.n(o),d=n(78773);function l(){let e=(0,s.useRouter)(),i=i=>i.some(i=>e.pathname.startsWith(i));return(0,t.jsx)("ul",{className:a().userTab,children:[{key:"profile",name:"會員資料",link:"/user/profile",paths:["/user/profile","/user/reset-password"]},{key:"reservation",name:"行程預約",link:"/user/reservation/ongoing",paths:["/user/reservation"]},{key:"orders",name:"商品訂單",link:"/user/orders/ongoing",paths:["/user/orders"]},{key:"favorite",name:"我的收藏",link:"/user/favorite",paths:["/user/favorite"]},{key:"coupons",name:"優惠券",link:"/user/coupon/ongoing",paths:["/user/coupon"]}].map((e,n)=>(0,t.jsx)("li",{className:i(e.paths)?a().active:"",children:(0,t.jsxs)(c(),{href:e.link,children:[(0,t.jsx)(d.ycZ,{}),(0,t.jsx)("span",{children:e.name})]})},e.key))})}},96345:function(e,i,n){"use strict";n.d(i,{Z:function(){return c}});var t=n(85893);n(67294);var s=n(5024),r=n.n(s);function c(e){let{userTab:i,userTabSec:n,sectionRight:s}=e;return(0,t.jsx)("section",{className:r().sectionContainer,children:(0,t.jsxs)("div",{className:r().sectionBody,children:[i,(0,t.jsxs)("div",{className:r().sectionRight,children:[n,s]})]})})}},8227:function(e,i,n){"use strict";var t=n(67294),s=n(87066),r=n(45747);i.Z=()=>{let[e,i]=(0,t.useState)([]),[n,c]=(0,t.useState)([]),[o,a]=(0,t.useState)(!1);return{order:e,detail:n,anyReviewed:o,fetchOrderData:async e=>{try{let n=await s.Z.get("".concat(r.VO,"/").concat(e));if(n.data.status){let e=n.data.orderDetails.find(e=>1==e.review_status);a(!!e),i(n.data.orders[0]),c(n.data.orderDetails)}}catch(e){console.error("Error fetching order and order detail data:",e)}}}}},25e3:function(e,i,n){"use strict";n.r(i),n.d(i,{default:function(){return j}});var t=n(85893),s=n(67294),r=n(11163),c=n(53483),o=n(96345);n(22535);var a=n(20611),d=n.n(a),l=n(16075),u=n(8227),v=n(78566),_=n.n(v),h=n(1653),p=n(43036),x=n(61435),f=n(37140);function m(e){var i;let{order_id:n}=e,c=(0,r.useRouter)(),{auth:o,authIsReady:a}=(0,l.aC)(),{order:v,detail:m,fetchOrderData:j}=(0,u.Z)(),[b,g]=(0,s.useState)(!1),[k,N]=(0,s.useState)(!1),w=()=>{v&&1===v.invoice_rtn_code&&v.invoice_no&&v.invoice_date&&v.invoice_random_number?N(!1):N(!0)};return(0,s.useEffect)(()=>{c.isReady&&a&&o.id&&n>0&&(j(n),g(!0))},[o.id,c.isReady,a]),(0,s.useEffect)(()=>{w(v)},[v]),(0,t.jsxs)("div",{className:d().sectionContainer,children:[k&&(0,t.jsx)(p.Z,{text:"錯誤路徑"}),!k&&(0,t.jsxs)("div",{className:d().taiwanInvoice,children:[(0,t.jsxs)("div",{className:d().invoiceHeader,children:[(0,t.jsx)("img",{src:"/home/invoice-logo.svg"}),(0,t.jsx)("div",{className:d().invoiceTitle,children:"電子發票證明聯"}),(0,t.jsx)("div",{className:d().invoiceSubTitle,children:(e=>{let i=new Date(e),n=i.getFullYear()-1911,t=i.getMonth()+1;return"".concat(n,"年 ").concat(t,"月-").concat(12===t?1:t+1,"月")})(v.invoice_date)}),(0,t.jsx)("div",{className:d().invoiceSubTitle,children:(i=v.invoice_no)?"".concat(i.slice(0,2),"-").concat(i.slice(2)):i})]}),(0,t.jsxs)("div",{className:d().invoiceInfo,children:[(0,t.jsxs)("div",{className:d().row,children:[(0,t.jsx)("div",{children:v.invoice_date}),(0,t.jsx)("div",{children:"格式：25"})]}),(0,t.jsxs)("div",{className:d().row,children:[(0,t.jsxs)("div",{children:["隨機碼：",v.invoice_random_number]}),(0,t.jsxs)("div",{children:["總計：",v.subtotal_price+v.deliver_fee-v.discountTotal]})]}),(0,t.jsx)("div",{children:"賣方：66666666"})]}),(0,t.jsx)("div",{className:d().barcodeBox,children:(0,t.jsx)(_(),{format:"CODE39",width:2.25,height:30,displayValue:!1,value:(e=>{let i=new Date(e),n=i.getFullYear()-1911,t=i.getMonth()+1;return"".concat(n).concat(t)})(v.invoice_date)})}),(0,t.jsxs)("div",{className:d().qrcodeBox,children:[(0,t.jsx)(h.ZP,{value:"".concat(v.invoice_date,",").concat(v.invoice_random_number),size:90}),(0,t.jsx)(h.ZP,{value:"".concat(v.invoice_date,",").concat(v.invoice_random_number),size:90})]})]}),(0,t.jsxs)("div",{className:d().btnStack,children:[(0,t.jsx)(f.Z,{btnText:"返回",href:null,onClick:()=>{c.back()}}),(0,t.jsx)(x.Z,{btnText:"列印",href:null,onClick:()=>{window.print()}})]})]})}function j(){let{order_id:e}=(0,r.useRouter)().query;return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(c.Z,{title:"訂單發票",pageName:"user",background:"light",children:(0,t.jsx)(o.Z,{userTab:null,sectionRight:(0,t.jsx)(m,{order_id:e})})})})}},98216:function(e){e.exports={userTab:"user-tab_userTab__oitHd",active:"user-tab_active__WQZR9"}},5024:function(e){e.exports={sectionContainer:"user-layout_sectionContainer__ZrxdZ",sectionBody:"user-layout_sectionBody__cHqmz",sectionRight:"user-layout_sectionRight__pqtpQ"}},20611:function(e){e.exports={sectionContainer:"invoice-paper_sectionContainer__NLPS5",taiwanInvoice:"invoice-paper_taiwanInvoice__QwZsi",invoiceHeader:"invoice-paper_invoiceHeader__LJsvO",invoiceTitle:"invoice-paper_invoiceTitle__HXEoA",invoiceSubTitle:"invoice-paper_invoiceSubTitle__w5qlK",invoiceInfo:"invoice-paper_invoiceInfo__d0BWJ",row:"invoice-paper_row__ErUGI",qrcodeBox:"invoice-paper_qrcodeBox__ImvMk",btnStack:"invoice-paper_btnStack__FAIZv"}}},function(e){e.O(0,[5970,4838,9317,4396,6660,509,2961,4321,959,6497,845,3483,2888,9774,179],function(){return e(e.s=34970)}),_N_E=e.O()}]);