(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2219],{33114:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/teams",function(){return s(80952)}])},28829:function(e,t,s){"use strict";let a=(0,s(83886).Z)({palette:{primary:{main:"#B99755"},secondary:{main:"#A29415"},standard:{main:"#B99755"},grey:{main:"#5B5B5B",light:"#D9D9D9",dark:"#495057",contrastText:"rgba(255, 255, 255, 1)"},black:{main:"#222",light:"#D9D9D9",dark:"#343a40",contrastText:"rgba(255, 255, 255, 1)"},favRed:{main:"#BA0606",light:"#D9D9D9",dark:"#990101",contrastText:"#BA0606"}}});t.Z=a},56733:function(e,t,s){"use strict";s.d(t,{iS:function(){return n},l2:function(){return r},mr:function(){return c},o0:function(){return l},wZ:function(){return o}});var a=s(80008),i=s.n(a);let r=e=>i()(e).tz("Asia/Taipei").format("YYYY年MM月DD日"),n=e=>i()(e).tz("Asia/Taipei").format("YYYY/MM/DD"),l=e=>i()(e).tz("Asia/Taipei").format("YYYY年MM月DD日 HH:mm"),c=e=>i()(e,"HH:mm:ss").format("A hh:mm"),o=e=>i()(e,"HH:mm:ss").format("HH:mm")},80952:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return ee}});var a=s(85893),i=s(67294),r=s(16075),n=s(53483),l=s(76214),c=s.n(l),o=s(11163),d=s(45747),m=s(86605),h=s(42179),x=s(747),u=s(83886);let _="#B99755",j="#B99755",p=(0,u.Z)({components:{MuiSelect:{styleOverrides:{root:{height:"40px",width:"100%",marginBottom:"24px",color:"#757575",fontFamily:"Noto Serif JP, serif","& .MuiSelect-select":{padding:"8px 16px",color:"".concat(j),background:"#333333",borderRadius:"9px"},"& .MuiOutlinedInput-notchedOutline":{border:"".concat("2px"," solid ").concat(_),lineHeight:1,borderRadius:"8px"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"#B99755"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"#B99755",boxShadow:"0 0 0 3px ".concat("#efede8")},"& .MuiSelect-icon":{transition:"200ms"}},"& .MuiSelect-menu":{"& .Mui-selected":{color:j}}}},MuiPaper:{styleOverrides:{root:{border:"".concat("2px"," solid ").concat(_),borderRadius:"8px",boxShadow:"none","& .Mui-disabled":{display:"none"}}}},MuiList:{styleOverrides:{root:{maxHeight:"300px",overflow:"auto",color:"black"}}},MuiMenuItem:{styleOverrides:{root:{fontFamily:"Noto Serif JP, serif","&.Mui-selected":{background:"#222222",borderRadius:"9px"},"&.Mui-selected:hover":{backgroundColor:"",color:j}}}}}});var g=s(48234);function f(e){let{name:t="",value:s="placeholder",placeholder:i="",options:r=[],onChange:n=()=>{}}=e;if(!Array.isArray(r)){console.error("options不是陣列，請確認",r);return}return(0===r.length||null===s||""===s)&&(s="placeholder"),(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(x.Z,{theme:p,children:(0,a.jsxs)(h.Z,{name:t,value:s,onChange:n,IconComponent:g.Z,children:["placeholder"===s&&i?(0,a.jsx)(m.Z,{value:"placeholder",disabled:!0,children:i}):"",r.map((e,t)=>(0,a.jsx)(m.Z,{value:e.value,disabled:e.disabled,children:e.text},t))]})})})}var v=s(5834),b=s.n(v),N=s(25675),w=s.n(N),y=s(41664),F=s.n(y),S=s(56733),T=s(87006),Z=s(7419),D=s(40911),M=s(1030),k=s(75557),B=s(83979);function P(e){let{team_id:t=0,branchName:s="",themeImg:i="theme-img.png",themeName:r="",difficulty:n="",max_players:l="",team_title:c="",rick_name:o="",reservation_date:d="",start_time:m="",themeTime:h=0,team_status:x=""}=e;return(0,a.jsxs)(T.Z,{variant:"plain",sx:{"--Card-radius":"0px",p:0},className:b()["card-01"],children:[(0,a.jsxs)(Z.Z,{sx:{position:"relative"},children:[(0,a.jsx)(D.ZP,{sx:{position:"absolute",top:"15px",left:"15px",color:"#FFFFFF",zIndex:1},children:s}),(0,a.jsxs)(D.ZP,{sx:{position:"absolute",top:"20px",right:"15px",padding:"10px 0",color:"#B99755",zIndex:1,height:"100px",width:"100px",textAlign:"center",background:"#222222c4",borderRadius:"50%"},children:["募集中"===x?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{children:"\\募集中/"}),(0,a.jsx)(w(),{src:"/ghost/ghost_05.png",alt:"",width:78,height:60})]}):null,"已成團"===x?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{children:"已成團！"}),(0,a.jsx)(w(),{src:"/ghost/ghost_06.png",alt:"",width:78,height:60})]}):null]}),(0,a.jsx)(M.Z,{ratio:"375/240",style:{borderRadius:"3px 3px 0 0"},children:(0,a.jsx)(w(),{src:"/themes-main/".concat(i),alt:"",width:375,height:240})}),(0,a.jsxs)(k.Z,{sx:{position:"absolute",bottom:"-20px",left:"25px",display:"flex",flexDirection:"row",alignItems:"center"},children:[(0,a.jsx)(D.ZP,{sx:{bgcolor:"#222222",color:"#FFFFFF",width:160,height:40,display:"flex",alignItems:"center",justifyContent:"center"},children:r}),(0,a.jsx)(D.ZP,{sx:{bgcolor:(e=>{switch(e){case"EASY":return"#63AA90";case"MEDIUM":return"#B99755";case"HARD":return"#A43131";default:return"#222222"}})(n),color:"#FFFFFF",width:100,height:40,display:"flex",alignItems:"center",justifyContent:"center"},children:n})]})]}),(0,a.jsxs)(B.Z,{sx:{pt:3,pb:0,px:{xs:2,sm:4},justifyContent:"center",color:"#B99755"},children:[(0,a.jsx)("h6",{className:"pb-2",children:c}),(0,a.jsxs)("span",{children:["團長：",o]}),(0,a.jsxs)("span",{children:["時間：",(0,S.l2)(d)," ",(0,S.mr)(m)]}),(0,a.jsxs)("div",{className:"row",children:[(0,a.jsx)("div",{className:"col-6",children:(0,a.jsxs)("span",{children:["長度：",h," 分鐘"]})}),(0,a.jsx)("div",{className:"col-6",children:(0,a.jsxs)("span",{children:["徵求人數：",l]})})]})]}),(0,a.jsx)(Z.Z,{children:(0,a.jsx)(B.Z,{orientation:"horizontal",sx:{px:3,pb:2,gap:{xs:1,sm:3}},children:(0,a.jsxs)("div",{style:{margin:"0 auto",paddingTop:"3px "},children:[" ",(0,a.jsxs)(F(),{href:"/teams/".concat(t),children:["募集中"===x?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("button",{className:b().button,children:"更多詳情"})}):null,"已成團"===x?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("button",{className:b().button,style:{backgroundColor:"#B99755"},children:"觀看記錄"})}):null]})]})})})]})}var A=s(73223),C=s(79856),I={src:"/_next/static/media/arrow-left.6b25a3fa.svg",height:22,width:47,blurWidth:0,blurHeight:0},E={src:"/_next/static/media/arrow-right.5eacb57b.svg",height:22,width:47,blurWidth:0,blurHeight:0},L=s(28829);function R(e){let{totalPages:t,setPage:s}=e,i=(0,o.useRouter)(),{query:r}=i,n=()=>(0,a.jsx)(w(),{src:I,alt:"Previous",width:47,height:21}),l=()=>(0,a.jsx)(w(),{src:E,alt:"Next",width:47,height:21});return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(x.Z,{theme:L.Z,children:(0,a.jsx)("div",{className:"col-12 d-flex justify-content-center mt-5",children:(0,a.jsx)(A.Z,{onChange:(e,t)=>{i.push({pathname:i.pathname,query:{...r,page:t}}),s(t)},size:"large",count:t,defaultPage:1,color:"primary",renderItem:e=>(0,a.jsx)(C.Z,{sx:{color:"#B99755",":hover":{backgroundColor:"rgba(185, 151, 85, 0.20)"},"&.Mui-selected":{color:"#fff"}},slots:{previous:n,next:l},...e})})})})})}function H(){let e=(0,o.useRouter)(),{query:t}=e,s=t.page?parseInt(t.page):1,[r,n]=(0,i.useState)({success:!1,rows:[]}),[l,m]=(0,i.useState)(s),[h,x]=(0,i.useState)(1),[u,_]=(0,i.useState)(""),[j,p]=(0,i.useState)(""),[g,v]=(0,i.useState)(""),[b,N]=(0,i.useState)(""),w=async()=>{let t=new URLSearchParams({page:l});u&&t.append("branch_id",u),g&&t.append("order",g),j&&t.append("difficulty",j),b&&t.append("team_status",b);try{let s=await fetch("".concat(d.ZA,"?").concat(t.toString())),a=await s.json();if(console.log("API result:",a),a.success)n({success:!0,rows:a.rows}),x(a.totalPages);else if(a.redirect){let t=new URLSearchParams(a.redirect).get("page");t&&(m(parseInt(t)),e.push({pathname:"/teams",query:{page:t}})),n({success:!1,rows:[]})}else n({success:!1,rows:[]})}catch(e){console.error("Error fetching data:",e),n({success:!1,rows:[]})}};return(0,i.useEffect)(()=>{w()},[u,g,j,b,l]),(0,i.useEffect)(()=>{m(s)},[t.page]),(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:c().teamsPage,children:(0,a.jsxs)("div",{className:"container",children:[(0,a.jsxs)("div",{className:"row",children:[(0,a.jsx)("h3",{className:c().secTitle,children:"團隊一覽"}),(0,a.jsx)("hr",{})]}),(0,a.jsxs)("div",{className:"row pb-5",children:[(0,a.jsx)("h4",{className:c().secTitle,children:"篩選排序"}),(0,a.jsx)("div",{className:"col-12 col-md-6 col-lg-3",children:(0,a.jsx)(f,{name:"branch",label:"館別篩選",value:u,placeholder:"館別篩選",onChange:e=>_(e.target.value),options:[{value:"",text:"館別篩選"},{value:"3",text:"台北館"},{value:"2",text:"台中館"},{value:"1",text:"高雄館"}]})}),(0,a.jsx)("div",{className:"col-12 col-md-6 col-lg-3",children:(0,a.jsx)(f,{name:"difficulty",label:"難度篩選",value:j,placeholder:"難度篩選",onChange:e=>p(e.target.value),options:[{value:"",text:"難度篩選"},{value:"EASY",text:"EASY"},{value:"MEDIUM",text:"MEDIUM"},{value:"HARD",text:"HARD"}]})}),(0,a.jsx)("div",{className:"col-12 col-md-6 col-lg-3",children:(0,a.jsx)(f,{name:"order",label:"時間排序",value:g,placeholder:"時間排序",onChange:e=>v(e.target.value),options:[{value:"",text:"時間排序"},{value:"DESC",text:"從新到舊"},{value:"ASC",text:"從舊到新"}]})}),(0,a.jsx)("div",{className:"col-12 col-md-6 col-lg-3",children:(0,a.jsx)(f,{name:"teamStatus",label:"隊伍狀態",value:b,placeholder:"隊伍狀態",onChange:e=>N(e.target.value),options:[{value:"",text:"隊伍狀態"},{value:"募集中",text:"募集中"},{value:"已成團",text:"已成團"}]})})]}),(0,a.jsx)("div",{className:"row",children:r.rows.length>0?r.rows.map(e=>(0,a.jsx)("div",{className:"col-12 col-md-6 col-lg-4",children:(0,a.jsx)(P,{team_id:e.team_id,branchName:e.branch_name,themeImg:e.theme_img,themeName:e.theme_name,difficulty:e.difficulty,suitablePlayers:e.suitable_players,themeTime:e.theme_Time,rick_name:e.nick_name,reservation_date:e.reservation_date,start_time:e.start_time,team_title:e.team_title,team_status:e.team_status,max_players:e.team_limit},e.team_id)},e.team_id)):(0,a.jsx)("div",{className:"col-12",children:(0,a.jsx)("p",{style:{textAlign:"center"},children:"沒有符合條件的團隊"})})}),(0,a.jsx)("div",{children:(0,a.jsx)(R,{totalPages:h,fetchData:w,setPage:m})})]})})})}function Y(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],[s,a]=(0,i.useState)(null),[r,n]=(0,i.useState)(!0),[l,c]=(0,i.useState)(null);return(0,i.useEffect)(()=>{(async()=>{try{let s=await fetch(e,t);if(!s.ok)throw Error("Network response was not ok");let i=await s.json();a(i)}catch(e){c(e)}finally{n(!1)}})()},[e,...t]),{data:s,isLoading:r,error:l}}function O(e){let{user_id:t=""}=e,{data:s,isLoading:i}=Y("".concat(d.pZ).concat(t));return i?(0,a.jsx)("div",{children:"Now Loading..."}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"row",children:[(0,a.jsx)("h4",{className:c().teamPaTitle,children:"已預約的行程"}),(0,a.jsx)("div",{className:c().titleBL})]}),(0,a.jsx)("div",{className:"row",style:{justifyContent:"center"},children:s.success?(0,a.jsx)(a.Fragment,{children:s.rows.map(e=>(0,a.jsxs)("div",{className:"col-lg-6 col-12 ".concat(c().preteamcard),children:[(0,a.jsxs)("div",{className:"row",children:[(0,a.jsxs)("div",{className:"col-4",children:["行程",(0,a.jsx)("br",{}),e.theme_name]}),(0,a.jsxs)("div",{className:"col-5",children:["日期時間",(0,a.jsx)("br",{}),(0,S.iS)(e.reservation_date)," ",(0,S.wZ)(e.start_time)]}),(0,a.jsxs)("div",{className:"col-3",children:["地區",(0,a.jsx)("br",{}),e.branch_name]})]}),(0,a.jsx)("div",{style:{textAlign:"center",marginTop:"12px"},className:"row",children:(0,a.jsx)(F(),{href:"/teams/add_team?reservation_id=".concat(e.reservation_id),children:(0,a.jsx)("button",{className:c().teamButton,children:"我要開團"})})})]},e.reservation_id))}):(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:c().noDataInfo,children:[(0,a.jsxs)("h6",{children:["您還沒有預訂行程，要不要",(0,a.jsx)(F(),{href:"/themes",children:"趕快預訂"}),"呢？"]}),(0,a.jsx)(F(),{href:"/themes",children:(0,a.jsx)(w(),{src:"/ghost/ghost_21.png",alt:"",width:100,height:100})})]})})})]})}var z=e=>{let{Data1:t,Data2:s,MemberCount:i}=e;return(0,a.jsxs)(a.Fragment,{children:[" ",t.length<1&&s<1?(0,a.jsxs)("div",{style:{textAlign:"center"},children:[(0,a.jsx)("h5",{children:"沒有參與的隊伍記錄"}),(0,a.jsx)("br",{}),(0,a.jsx)(w(),{src:"/ghost/ghost_01.png",alt:"",width:100,height:100})]}):(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("table",{className:c().teamTable,children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"團名"}),(0,a.jsx)("th",{children:"行程"}),(0,a.jsx)("th",{children:"時間"}),(0,a.jsx)("th",{children:"人數"})]})}),(0,a.jsxs)("tbody",{children:[t.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:(0,a.jsx)(F(),{href:"/teams/".concat(e.team_id),children:e.team_title})}),(0,a.jsx)("td",{children:e.theme_name}),(0,a.jsxs)("td",{style:{minWidth:"150px"},children:[(0,S.iS)(e.reservation_date)," ",(0,S.wZ)(e.start_time)]}),(0,a.jsxs)("td",{children:[i[e.team_id]||0," / ",e.team_limit]})]},e.team_id)),s.length>0?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("tr",{children:(0,a.jsx)("td",{children:(0,a.jsx)("br",{})})}),(0,a.jsx)("tr",{style:{borderTop:"1px solid #B99755"},children:(0,a.jsx)("td",{style:{paddingTop:"16px"},children:"已成團"})}),s.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:(0,a.jsx)(F(),{href:"/teams/".concat(e.team_id),children:e.team_title})}),(0,a.jsx)("td",{children:e.theme_name}),(0,a.jsxs)("td",{style:{minWidth:"150px"},children:[(0,S.iS)(e.reservation_date)," ",(0,S.wZ)(e.start_time)]}),(0,a.jsxs)("td",{children:[i[e.team_id]||0," / ",e.team_limit]})]},e.team_id))]}):(0,a.jsx)(a.Fragment,{})]})]})})]})},W=s(89262),U=s(45535),q=s(36657),J=s(66529),X=s(94246);let G=(0,W.ZP)(e=>(0,a.jsx)(U.Z,{disableGutters:!0,elevation:0,square:!0,...e}))(e=>{let{theme:t}=e;return{background:"#333333",color:"#B99755",border:"1px solid ".concat(t.palette.divider),"&:not(:last-child)":{borderBottom:0},"&:before":{display:"none"}}}),Q=(0,W.ZP)(e=>(0,a.jsx)(q.Z,{...e}))(()=>({"& .MuiTypography-body1":{fontFamily:"Noto Serif JP, serif",textAlign:"center",margin:"0 auto",fontSize:"22px"}})),K=(0,W.ZP)(J.Z)({}),V=(0,W.ZP)(e=>(0,a.jsx)(X.Z,{...e}))(()=>({"& a":{color:"#FFF"}}));function $(e){var t;let{auth:s}=e,{data:i,isLoading:r}=Y("".concat(d.Gj).concat(s.id)),{data:n,isLoading:l}=Y("".concat(d.Vp).concat(s.id)),{data:o,isLoading:m}=Y(d.tz);if(r||l||m)return(0,a.jsx)("div",{children:"Now Loading..."});let h={};return null==o||null===(t=o.data)||void 0===t||t.forEach(e=>{h[e.join_team_id]?h[e.join_team_id]++:h[e.join_team_id]=1}),(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:c().teamsPage,children:(0,a.jsx)("div",{className:"container",children:(0,a.jsx)("div",{className:"row pb-3",children:(0,a.jsxs)(G,{children:[(0,a.jsx)(Q,{"aria-controls":"panel1-content",id:"panel1-header",children:(0,a.jsx)(V,{component:"div",children:"您的團隊"})}),(0,a.jsx)(K,{component:"div",children:(0,a.jsxs)(V,{component:"div",children:[(0,a.jsxs)("div",{className:"row",style:{borderTop:"1px solid #B99755",paddingTop:"10px"},children:[(0,a.jsxs)("div",{className:"col-12 col-lg-6 ".concat(c().teamlistblock," ").concat(c().teamlistblock1),children:[(0,a.jsx)("h4",{className:c().teamPaTitle,children:"您帶領的團隊"}),(0,a.jsx)("div",{className:c().titleBL}),(0,a.jsx)(z,{Data1:i.recruiting,Data2:i.formed,MemberCount:h}),(0,a.jsx)("div",{className:c().bb2})]}),(0,a.jsxs)("div",{className:"col-12 col-lg-6",children:[(0,a.jsx)("h4",{className:c().teamPaTitle,children:"您參加的團隊"}),(0,a.jsx)("div",{className:c().titleBL}),(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(z,{Data1:n.recruiting,Data2:n.formed,MemberCount:h})})]}),(0,a.jsx)("div",{className:c().bb})]}),(0,a.jsx)(O,{user_id:s.id})]})})]})})})})})}function ee(){let{auth:e}=(0,r.aC)();return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(n.Z,{title:"揪團",background:"dark",children:(0,a.jsxs)("div",{className:c().teamsPage,children:[(0,a.jsx)("div",{className:c().pageTitle,children:(0,a.jsx)("h2",{children:"揪團頁面"})}),e.id?(0,a.jsx)("div",{children:(0,a.jsx)($,{auth:e})}):(0,a.jsx)(a.Fragment,{}),(0,a.jsx)("div",{children:(0,a.jsx)(H,{})})]})})})}},5834:function(e){e.exports={"card-01":"cards_card-01__hH1wc",button:"cards_button__tMu_6"}},76214:function(e){e.exports={teamsPage:"teams_teamsPage__WIH5F",teamsNotice:"teams_teamsNotice__ffITv",formCheck:"teams_formCheck__vQLqq",pageTitle:"teams_pageTitle__iN_6w",secTitle:"teams_secTitle__RDW5F",borderbox:"teams_borderbox__xfhzW",tourInfo:"teams_tourInfo__yUVpe",teamsSection:"teams_teamsSection__yvYjf",teamUnite:"teams_teamUnite___J280",teamCard:"teams_teamCard__7WL7A",teamTourInfo:"teams_teamTourInfo__heX5v",bb:"teams_bb__S64up",teamlistblock:"teams_teamlistblock__eihys",teamlistblock1:"teams_teamlistblock1__hTYo1",bb2:"teams_bb2__Soc4N",preteamcard:"teams_preteamcard__J4dO1",teamPaTitle:"teams_teamPaTitle__KXqlf",titleBL:"teams_titleBL__7lR4x",titleLink:"teams_titleLink__DFx_f",teamForm:"teams_teamForm__Bs_zj",sty:"teams_sty__scYls",chatlist:"teams_chatlist__L_r0_",teamTable:"teams_teamTable__ChlJA",teamTitle:"teams_teamTitle__D2tR_",teamContent:"teams_teamContent__FDc8w",diffeasy:"teams_diffeasy__IBSeB",diffmedium:"teams_diffmedium__5v8xR",diffhard:"teams_diffhard__RrQb8","MuiAccordionActions-spacing":"teams_MuiAccordionActions-spacing__caGEf",avatarImg:"teams_avatarImg__vWpkH",buttonBrown:"teams_buttonBrown__K5g73",teamButton:"teams_teamButton__1nqQe",noDataInfo:"teams_noDataInfo__gEhOC"}}},function(e){e.O(0,[5970,4838,9317,4396,6660,509,2961,4321,2678,4885,959,6497,3223,2179,9087,611,3483,2888,9774,179],function(){return e(e.s=33114)}),_N_E=e.O()}]);