(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4051],{80008:function(e,t,n){(e.exports=n(85177)).tz.load(n(91128))},85177:function(e,t,n){var r,a,o;o=function(e){"use strict";void 0===e.version&&e.default&&(e=e.default);var t,n,r={},a={},o={},s={},i={};e&&"string"==typeof e.version||S("Moment Timezone requires Moment.js. See https://momentjs.com/timezone/docs/#/use-it/browser/");var l=e.version.split("."),c=+l[0],m=+l[1];function f(e){return e>96?e-87:e>64?e-29:e-48}function u(e){var t,n=0,r=e.split("."),a=r[0],o=r[1]||"",s=1,i=0,l=1;for(45===e.charCodeAt(0)&&(n=1,l=-1);n<a.length;n++)i=60*i+(t=f(a.charCodeAt(n)));for(n=0;n<o.length;n++)s/=60,i+=(t=f(o.charCodeAt(n)))*s;return i*l}function d(e){for(var t=0;t<e.length;t++)e[t]=u(e[t])}function h(e,t){var n,r=[];for(n=0;n<t.length;n++)r[n]=e[t[n]];return r}function _(e){var t=e.split("|"),n=t[2].split(" "),r=t[3].split(""),a=t[4].split(" ");return d(n),d(r),d(a),function(e,t){for(var n=0;n<t;n++)e[n]=Math.round((e[n-1]||0)+6e4*e[n]);e[t-1]=1/0}(a,r.length),{name:t[0],abbrs:h(t[1].split(" "),r),offsets:h(n,r),untils:a,population:0|t[5]}}function p(e){e&&this._set(_(e))}function b(e,t){this.name=e,this.zones=t}function x(e){var t=e.toTimeString(),n=t.match(/\([a-z ]+\)/i);"GMT"===(n=n&&n[0]?(n=n[0].match(/[A-Z]/g))?n.join(""):void 0:(n=t.match(/[A-Z]{3,5}/g))?n[0]:void 0)&&(n=void 0),this.at=+e,this.abbr=n,this.offset=e.getTimezoneOffset()}function v(e){this.zone=e,this.offsetScore=0,this.abbrScore=0}function g(e,t){return e.offsetScore!==t.offsetScore?e.offsetScore-t.offsetScore:e.abbrScore!==t.abbrScore?e.abbrScore-t.abbrScore:e.zone.population!==t.zone.population?t.zone.population-e.zone.population:t.zone.name.localeCompare(e.zone.name)}function j(e){return(e||"").toLowerCase().replace(/\//g,"_")}function z(e){var t,n,a,o;for("string"==typeof e&&(e=[e]),t=0;t<e.length;t++)r[o=j(n=(a=e[t].split("|"))[0])]=e[t],s[o]=n,function(e,t){var n,r;for(d(t),n=0;n<t.length;n++)i[r=t[n]]=i[r]||{},i[r][e]=!0}(o,a[2].split(" "))}function y(e,t){var n,o=r[e=j(e)];return o instanceof p?o:"string"==typeof o?(o=new p(o),r[e]=o,o):a[e]&&t!==y&&(n=y(a[e],y))?((o=r[e]=new p)._set(n),o.name=s[e],o):null}function w(e){var t,n,r,o;for("string"==typeof e&&(e=[e]),t=0;t<e.length;t++)r=j((n=e[t].split("|"))[0]),o=j(n[1]),a[r]=o,s[r]=n[0],a[o]=r,s[o]=n[1]}function k(e){var t="X"===e._f||"x"===e._f;return!!(e._a&&void 0===e._tzm&&!t)}function S(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e)}function N(t){var n,r=Array.prototype.slice.call(arguments,0,-1),a=arguments[arguments.length-1],o=e.utc.apply(null,r);return!e.isMoment(t)&&k(o)&&(n=y(a))&&o.add(n.parse(o),"minutes"),o.tz(a),o}(c<2||2===c&&m<6)&&S("Moment Timezone requires Moment.js >= 2.6.0. You are using Moment.js "+e.version+". See momentjs.com"),p.prototype={_set:function(e){this.name=e.name,this.abbrs=e.abbrs,this.untils=e.untils,this.offsets=e.offsets,this.population=e.population},_index:function(e){var t;if((t=function(e,t){var n,r=t.length;if(e<t[0])return 0;if(r>1&&t[r-1]===1/0&&e>=t[r-2])return r-1;if(e>=t[r-1])return -1;for(var a=0,o=r-1;o-a>1;)t[n=Math.floor((a+o)/2)]<=e?a=n:o=n;return o}(+e,this.untils))>=0)return t},countries:function(){var e=this.name;return Object.keys(o).filter(function(t){return -1!==o[t].zones.indexOf(e)})},parse:function(e){var t,n,r,a,o=+e,s=this.offsets,i=this.untils,l=i.length-1;for(a=0;a<l;a++)if(t=s[a],n=s[a+1],r=s[a?a-1:a],t<n&&N.moveAmbiguousForward?t=n:t>r&&N.moveInvalidForward&&(t=r),o<i[a]-6e4*t)return s[a];return s[l]},abbr:function(e){return this.abbrs[this._index(e)]},offset:function(e){return S("zone.offset has been deprecated in favor of zone.utcOffset"),this.offsets[this._index(e)]},utcOffset:function(e){return this.offsets[this._index(e)]}},v.prototype.scoreOffsetAt=function(e){this.offsetScore+=Math.abs(this.zone.utcOffset(e.at)-e.offset),this.zone.abbr(e.at).replace(/[^A-Z]/g,"")!==e.abbr&&this.abbrScore++},N.version="0.5.45",N.dataVersion="",N._zones=r,N._links=a,N._names=s,N._countries=o,N.add=z,N.link=w,N.load=function(e){z(e.zones),w(e.links),function(e){var t,n,r,a;if(e&&e.length)for(t=0;t<e.length;t++)n=(a=e[t].split("|"))[0].toUpperCase(),r=a[1].split(" "),o[n]=new b(n,r)}(e.countries),N.dataVersion=e.version},N.zone=y,N.zoneExists=function e(t){return e.didShowError||(e.didShowError=!0,S("moment.tz.zoneExists('"+t+"') has been deprecated in favor of !moment.tz.zone('"+t+"')")),!!y(t)},N.guess=function(e){return(!n||e)&&(n=function(){try{var e=Intl.DateTimeFormat().resolvedOptions().timeZone;if(e&&e.length>3){var t=s[j(e)];if(t)return t;S("Moment Timezone found "+e+" from the Intl api, but did not have that data loaded.")}}catch(e){}var n,r,a,o=function(){var e,t,n,r,a=new Date().getFullYear()-2,o=new x(new Date(a,0,1)),s=o.offset,i=[o];for(r=1;r<48;r++)(n=new Date(a,r,1).getTimezoneOffset())!==s&&(i.push(e=function(e,t){for(var n,r;r=((t.at-e.at)/12e4|0)*6e4;)(n=new x(new Date(e.at+r))).offset===e.offset?e=n:t=n;return e}(o,t=new x(new Date(a,r,1)))),i.push(new x(new Date(e.at+6e4))),o=t,s=n);for(r=0;r<4;r++)i.push(new x(new Date(a+r,0,1))),i.push(new x(new Date(a+r,6,1)));return i}(),l=o.length,c=function(e){var t,n,r,a,o=e.length,l={},c=[],m={};for(t=0;t<o;t++)if(r=e[t].offset,!m.hasOwnProperty(r)){for(n in a=i[r]||{})a.hasOwnProperty(n)&&(l[n]=!0);m[r]=!0}for(t in l)l.hasOwnProperty(t)&&c.push(s[t]);return c}(o),m=[];for(r=0;r<c.length;r++){for(a=0,n=new v(y(c[r]),l);a<l;a++)n.scoreOffsetAt(o[a]);m.push(n)}return m.sort(g),m.length>0?m[0].zone.name:void 0}()),n},N.names=function(){var e,t=[];for(e in s)s.hasOwnProperty(e)&&(r[e]||r[a[e]])&&s[e]&&t.push(s[e]);return t.sort()},N.Zone=p,N.unpack=_,N.unpackBase60=u,N.needsOffset=k,N.moveInvalidForward=!0,N.moveAmbiguousForward=!1,N.countries=function(){return Object.keys(o)},N.zonesForCountry=function(e,t){if(!(e=o[e.toUpperCase()]||null))return null;var n=e.zones.sort();return t?n.map(function(e){var t=y(e);return{name:e,offset:t.utcOffset(new Date)}}):n};var T=e.fn;function C(e){return function(){return this._z?this._z.abbr(this):e.call(this)}}function D(e){return function(){return this._z=null,e.apply(this,arguments)}}e.tz=N,e.defaultZone=null,e.updateOffset=function(t,n){var r,a=e.defaultZone;if(void 0===t._z&&(a&&k(t)&&!t._isUTC&&t.isValid()&&(t._d=e.utc(t._a)._d,t.utc().add(a.parse(t),"minutes")),t._z=a),t._z){if(16>Math.abs(r=t._z.utcOffset(t))&&(r/=60),void 0!==t.utcOffset){var o=t._z;t.utcOffset(-r,n),t._z=o}else t.zone(r,n)}},T.tz=function(t,n){if(t){if("string"!=typeof t)throw Error("Time zone name must be a string, got "+t+" ["+typeof t+"]");return this._z=y(t),this._z?e.updateOffset(this,n):S("Moment Timezone has no data for "+t+". See http://momentjs.com/timezone/docs/#/data-loading/."),this}if(this._z)return this._z.name},T.zoneName=C(T.zoneName),T.zoneAbbr=C(T.zoneAbbr),T.utc=D(T.utc),T.local=D(T.local),T.utcOffset=(t=T.utcOffset,function(){return arguments.length>0&&(this._z=null),t.apply(this,arguments)}),e.tz.setDefault=function(t){return(c<2||2===c&&m<9)&&S("Moment Timezone setDefault() requires Moment.js >= 2.9.0. You are using Moment.js "+e.version+"."),e.defaultZone=t?y(t):null,e};var O=e.momentProperties;return"[object Array]"===Object.prototype.toString.call(O)?(O.push("_z"),O.push("_a")):O&&(O._z=null),e},e.exports?e.exports=o(n(30381)):(r=[n(30381)],void 0===(a=o.apply(t,r))||(e.exports=a))},60859:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/teams/add_team",function(){return n(97916)}])},28829:function(e,t,n){"use strict";let r=(0,n(83886).Z)({palette:{primary:{main:"#B99755"},secondary:{main:"#A29415"},standard:{main:"#B99755"},grey:{main:"#5B5B5B",light:"#D9D9D9",dark:"#495057",contrastText:"rgba(255, 255, 255, 1)"},black:{main:"#222",light:"#D9D9D9",dark:"#343a40",contrastText:"rgba(255, 255, 255, 1)"},favRed:{main:"#BA0606",light:"#D9D9D9",dark:"#990101",contrastText:"#BA0606"}}});t.Z=r},56733:function(e,t,n){"use strict";n.d(t,{iS:function(){return s},l2:function(){return o},mr:function(){return l},o0:function(){return i},wZ:function(){return c}});var r=n(80008),a=n.n(r);let o=e=>a()(e).tz("Asia/Taipei").format("YYYY年MM月DD日"),s=e=>a()(e).tz("Asia/Taipei").format("YYYY/MM/DD"),i=e=>a()(e).tz("Asia/Taipei").format("YYYY年MM月DD日 HH:mm"),l=e=>a()(e,"HH:mm:ss").format("A hh:mm"),c=e=>a()(e,"HH:mm:ss").format("HH:mm")},97916:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return k}});var r=n(85893),a=n(67294),o=n(11163),s=n(53483),i=n(76214),l=n.n(i),c=n(56733),m=n(97928),f=n(41664),u=n.n(f),d=n(16075),h=n(45747),_=n(41869),p=n(59154),b=n(98163),x=n(56771),v=n.n(x);function g(e){let{modalTitle:t="Modal Title",modalBody:n,open:o,onClose:s,modalW:i="90%"}=e,[l,c]=(0,a.useState)(i);return(0,a.useEffect)(()=>{let e=()=>{window.innerWidth<=992?c("450px"):c(i)};return window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)},[i]),(0,r.jsx)(p.Z,{open:o,onClose:()=>{},children:(0,r.jsxs)(_.Z,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:i,bgcolor:"#222222",borderRadius:"1rem",boxShadow:"var(--card-shadow)",padding:"2.5rem",color:"#B99755",lineHeight:"1.5"},children:[(0,r.jsx)("h4",{className:v().modalHeader,children:t}),(0,r.jsx)("hr",{}),(0,r.jsx)("div",{className:v().modalContent,style:{maxHeight:"500px",overflowY:"auto",lineHeight:"1.5"},children:n}),(0,r.jsx)("hr",{}),(0,r.jsx)("div",{style:{display:"flex",justifyContent:"center",marginTop:"1rem"},children:(0,r.jsx)(b.Z,{sx:{border:"1px solid black",fontFamily:"Noto Serif JP",fontSize:"16px",borderRadius:"30px",backgroundColor:"#B99755",color:"black",padding:"10px 30px","&:hover":{backgroundColor:"white",color:"#B99755",boxShadow:"none"},boxShadow:"none"},variant:"contained",onClick:s,children:"確定"})})]})})}function j(){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h3",{className:"d-none d-lg-block ".concat(l().teamTitle),children:"注意事項"}),(0,r.jsx)("div",{className:l().teamsNotice,children:(0,r.jsxs)("ol",{children:[(0,r.jsx)("li",{children:"在創立團隊之前，請先完成預約行程的手續並支付訂金。只有在預約成功後才能創建團隊。"}),(0,r.jsx)("li",{children:"創團後，團長可以審核是否讓申請入團的使用者加入。"}),(0,r.jsxs)("li",{children:["創建團隊時，請注意團隊人數限制。團隊人數一旦確定，",(0,r.jsx)("br",{}),"將無法再進行更改，請在創建之前仔細確認團隊人數。"]}),(0,r.jsx)("li",{children:"請選擇一個合適且符合規範的團隊名稱。團隊名稱應該清晰明瞭，不得包含不當或違法的內容。"}),(0,r.jsx)("li",{children:"創團後，團長和團員應遵守平台或服務的相關規定和條款。如果違反規定，可能會影響團隊的運營或成員資格。"}),(0,r.jsx)("li",{children:"請在備註欄中提供團隊創建的詳細信息或特殊要求。這些信息有助於其他成員了解團隊的運作和規範。"})]})})]})}var z=n(747),y=n(28829);function w(e){let{btnText:t="沒設定",onClick:n,disableSubmit:a}=e;return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(z.Z,{theme:y.Z,children:(0,r.jsx)(b.Z,{variant:"contained",type:"submit",onClick:n,disableSubmit:a,sx:{fontFamily:"Noto Serif JP",borderRadius:"16px",marginLeft:"0.625rem",fontSize:"18px",fontWeight:700,letterSpacing:"2.16px",width:"180px",padding:"10px 19px",backgroundColor:a?"gray":"#B99755","&:hover":{},cursor:a?"not-allowed":"pointer",opacity:a?.5:1},children:t})})})}function k(){let{auth:e}=(0,d.aC)(),t=(0,o.useRouter)(),{reservation_id:n}=t.query,{openSnackbar:i}=(0,m.Ds)(),[f,_]=(0,a.useState)(null),[p,b]=(0,a.useState)({success:!1,reservation_id:0,team_title:"",team_limit:"1",team_note:""}),[x,v]=(0,a.useState)(""),[z,y]=(0,a.useState)(""),[k,S]=(0,a.useState)(""),[N,T]=(0,a.useState)(!1),[C,D]=(0,a.useState)(!0),[O,A]=(0,a.useState)(!1);(0,a.useEffect)(()=>{n&&B(n)},[n]);let B=async e=>{try{let t=await fetch("".concat(h.VB).concat(e)),n=await t.json();n.success?(_(n.rows[0]),b(t=>({...t,reservation_id:e}))):console.error("Error fetching data:",n.message)}catch(e){console.error("Fetch error:",e)}},M=()=>{let e=!0;return p.team_title.length<3?(v("團隊名稱需大於3個字"),e=!1):v(""),z&&(e=!1),document.getElementById("readCheck").checked?S(""):(S("請閱讀注意事項"),e=!1),e},F=e=>{let{name:t,value:n}=e.target;if(b({...p,[t]:n}),"team_limit"===t){let e=f.participants-1;parseInt(n,10)>e?y("此行程團員上限為".concat(e,"人")):y("")}"team_title"===t&&(n.length<3?v("團隊名稱需大於3個字"):v("")),M()?D(!1):D(!0)},E=async e=>{if(e.preventDefault(),M())try{let e=await fetch(h.gb,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)});(await e.json()).success?(i("成功創建團隊！","success"),t.push("/teams")):i("創建團隊失敗","error")}catch(e){i("創建團隊時發生錯誤","error")}};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(s.Z,{title:"糾團",background:"dark",children:[(0,r.jsx)("div",{className:l().pageTitle,children:(0,r.jsx)("h2",{style:{color:"#B99755"},children:"新增團隊"})}),(0,r.jsx)("div",{className:l().teamsPage,children:(0,r.jsx)("div",{className:"container",children:(0,r.jsxs)("div",{className:"row",children:[(0,r.jsx)("div",{className:"col-12 col-lg-6",children:(0,r.jsxs)("div",{className:l().borderbox,children:[(0,r.jsx)("h3",{className:l().teamTitle,children:"創立團隊"}),(0,r.jsxs)("form",{name:"createTeam",onSubmit:E,className:l().teamForm,children:[(0,r.jsx)("div",{className:"mb-3",children:(0,r.jsxs)("label",{htmlFor:"lead_name",className:"form-label",children:["團長： ",e.nickname]})}),f?(0,r.jsx)("div",{className:"mb-3",children:(0,r.jsxs)("div",{className:"displayDetail",children:[(0,r.jsxs)("div",{children:["主題名稱: ",f.theme_name]}),(0,r.jsxs)("div",{children:["行程日期:"," ",(0,c.l2)(f.reservation_date)]}),(0,r.jsxs)("div",{children:["活動時間: ",(0,c.mr)(f.start_time)," ~"," ",(0,c.mr)(f.end_time)]}),(0,r.jsxs)("div",{children:["預約人數: ",f.participants," 人"]})]})}):(0,r.jsx)("div",{children:"Loading..."}),(0,r.jsx)("hr",{}),(0,r.jsxs)("div",{className:"mb-3 ".concat(l().sty),children:[(0,r.jsx)("label",{htmlFor:"team_title",className:"form-label",children:"團隊名稱"}),(0,r.jsx)("input",{type:"text",className:"form-control",id:"team_title",name:"team_title",value:p.team_title,onChange:F,"aria-describedby":"enterteamname"}),(0,r.jsx)("div",{style:{color:"red"},children:x&&x})]}),(0,r.jsxs)("div",{className:"mb-3 ".concat(l().sty),children:[(0,r.jsx)("label",{htmlFor:"team_limit",className:"form-label",children:"募集人數"}),(0,r.jsx)("input",{type:"number",className:"form-control",id:"team_limit",name:"team_limit",value:p.team_limit,onChange:F,"aria-label":"enterteamlimit"}),(0,r.jsxs)("div",{style:{color:"red"},children:["\xa0",z&&z]})]}),(0,r.jsxs)("div",{className:"mb-3",children:[(0,r.jsx)("label",{htmlFor:"team_note",className:"form-label",children:"開團備註（200字以內）"}),(0,r.jsx)("textarea",{className:"form-control",id:"floatingTextarea",name:"team_note",value:p.team_note,onChange:F})]}),(0,r.jsxs)("div",{className:"mb-3 form-check",children:[(0,r.jsx)("input",{type:"checkbox",className:"form-check-input",id:"readCheck",checked:N,onChange:()=>T(!N)}),(0,r.jsxs)("label",{className:l().formCheck,htmlFor:"readCheck",children:["我已閱讀",(0,r.jsx)(u(),{href:"#",onClick:()=>{window.innerWidth<992&&A(!0)},children:(0,r.jsx)("b",{children:"注意事項"})})]}),(0,r.jsx)("div",{style:{color:"red"},children:k})]}),(0,r.jsx)("div",{style:{textAlign:"center"},children:(0,r.jsx)(w,{btnText:"建立團隊",color:"#B99577",disableSubmit:C})})]})]})}),(0,r.jsx)("div",{className:"col-lg-6 d-none d-lg-block",children:(0,r.jsx)("div",{className:l().borderbox,children:(0,r.jsx)(j,{})})})]})})})]}),(0,r.jsx)(g,{open:O,onClose:()=>{A(!1),document.getElementById("readCheck").checked=!0,S(""),M()&&D(!1)},modalTitle:"注意事項",modalBody:(0,r.jsx)(j,{})})]})}},56771:function(e){e.exports={styles:"basic-modal_styles__ZHLML",modalHeader:"basic-modal_modalHeader__sgUgH"}},76214:function(e){e.exports={teamsPage:"teams_teamsPage__WIH5F",teamsNotice:"teams_teamsNotice__ffITv",formCheck:"teams_formCheck__vQLqq",pageTitle:"teams_pageTitle__iN_6w",secTitle:"teams_secTitle__RDW5F",borderbox:"teams_borderbox__xfhzW",tourInfo:"teams_tourInfo__yUVpe",teamsSection:"teams_teamsSection__yvYjf",teamUnite:"teams_teamUnite___J280",teamCard:"teams_teamCard__7WL7A",teamTourInfo:"teams_teamTourInfo__heX5v",bb:"teams_bb__S64up",teamlistblock:"teams_teamlistblock__eihys",teamlistblock1:"teams_teamlistblock1__hTYo1",bb2:"teams_bb2__Soc4N",preteamcard:"teams_preteamcard__J4dO1",teamPaTitle:"teams_teamPaTitle__KXqlf",titleBL:"teams_titleBL__7lR4x",titleLink:"teams_titleLink__DFx_f",teamForm:"teams_teamForm__Bs_zj",sty:"teams_sty__scYls",chatlist:"teams_chatlist__L_r0_",teamTable:"teams_teamTable__ChlJA",teamTitle:"teams_teamTitle__D2tR_",teamContent:"teams_teamContent__FDc8w",diffeasy:"teams_diffeasy__IBSeB",diffmedium:"teams_diffmedium__5v8xR",diffhard:"teams_diffhard__RrQb8","MuiAccordionActions-spacing":"teams_MuiAccordionActions-spacing__caGEf",avatarImg:"teams_avatarImg__vWpkH",buttonBrown:"teams_buttonBrown__K5g73",teamButton:"teams_teamButton__1nqQe",noDataInfo:"teams_noDataInfo__gEhOC"}}},function(e){e.O(0,[5970,4838,9317,4396,6660,509,2961,4321,2678,4885,959,6497,3483,2888,9774,179],function(){return e(e.s=60859)}),_N_E=e.O()}]);